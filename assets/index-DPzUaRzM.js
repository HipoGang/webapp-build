var cs=Object.defineProperty;var ds=(e,t,n)=>t in e?cs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var c=(e,t,n)=>ds(e,typeof t!="symbol"?t+"":t,n);import{r as us,o as M,b as ut,c as De,m as hs,d as ps,e as ht,f as N,h as E,i as b,j as fs,R as ms}from"./lib-Bshe5Lnh.js";import{C as pt,T as gs,a as ft}from"./tonconnect-BUqmiDOX.js";import{d as _}from"./ton-DqRC0B9X.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const g of d.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function n(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(o){if(o.ep)return;o.ep=!0;const d=n(o);fetch(o.href,d)}})();var kt={exports:{}},Ie={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vs=us,xs=Symbol.for("react.element"),bs=Symbol.for("react.fragment"),ws=Object.prototype.hasOwnProperty,ys=vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,As={key:!0,ref:!0,__self:!0,__source:!0};function Tt(e,t,n){var a,o={},d=null,g=null;n!==void 0&&(d=""+n),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(g=t.ref);for(a in t)ws.call(t,a)&&!As.hasOwnProperty(a)&&(o[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)o[a]===void 0&&(o[a]=t[a]);return{$$typeof:xs,type:e,key:d,ref:g,props:o,_owner:ys.current}}Ie.Fragment=bs;Ie.jsx=Tt;Ie.jsxs=Tt;kt.exports=Ie;var s=kt.exports;const Cs="data:image/svg+xml,%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%2020%2021'%20style='enable-background:new%200%200%2020%2021;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill-rule:evenodd;clip-rule:evenodd;fill:%23FFFFFF;}%20%3c/style%3e%3cpath%20class='st0'%20d='M15.4,5.3h3.9c0.4,0,0.7,0.3,0.7,0.7V20c0,0.4-0.3,0.7-0.7,0.7h-3.9c-0.4,0-0.7-0.3-0.7-0.7V5.9%20C14.7,5.6,15,5.3,15.4,5.3L15.4,5.3z%20M6.7,2.4L5.9,1.9C5.9,1.8,5.8,1.7,5.9,1.6c0-0.1,0.1-0.1,0.1-0.2l3.6-1.1c0.1,0,0.1,0,0.2,0%20c0.1,0,0.1,0.1,0.1,0.2l0.3,3.9c0,0.1,0,0.2-0.1,0.2c-0.1,0-0.2,0-0.2,0L9.1,4.1C6.4,7.8,3.7,8.7,0.3,8.3c-0.1,0-0.2-0.1-0.2-0.2%20c0-0.1,0.1-0.2,0.2-0.2C4.1,6.8,6.1,3.7,6.7,2.4z%20M1.3,13.3h3.9c0.4,0,0.7,0.3,0.7,0.7V20c0,0.4-0.3,0.7-0.7,0.7H1.3%20c-0.4,0-0.7-0.3-0.7-0.7V14C0.7,13.6,1,13.3,1.3,13.3L1.3,13.3z%20M12.2,9.3H8.3C8,9.3,7.7,9.6,7.7,9.9V20c0,0.4,0.3,0.7,0.7,0.7h3.9%20c0.4,0,0.7-0.3,0.7-0.7V9.9C12.8,9.6,12.5,9.3,12.2,9.3z'/%3e%3c/svg%3e",ks="data:image/svg+xml,%3csvg%20width='30'%20height='16'%20viewBox='0%200%2030%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3cpath%20d='M5.52248%207.01112C6.83106%207.01112%207.89186%205.86967%207.89186%204.46162C7.89186%203.05356%206.83106%201.91211%205.52248%201.91211C4.21391%201.91211%203.15311%203.05356%203.15311%204.46162C3.15311%205.86967%204.21391%207.01112%205.52248%207.01112Z'%20fill='white'/%3e%3cpath%20d='M8.6856%208.79579C8.07073%209.29385%207.57192%209.93892%207.22856%2010.6801C6.8852%2011.4212%206.70671%2012.2381%206.70717%2013.0662V13.3849H1.67224C1.18652%2013.3849%200.783722%2012.9515%200.783722%2012.4288V11.7915C0.783722%209.85383%202.24089%208.28589%204.04162%208.28589H7.00334C7.61938%208.28589%208.19987%208.4771%208.6856%208.79579Z'%20fill='white'/%3e%3cpath%20d='M24.4775%207.01112C25.7861%207.01112%2026.8469%205.86967%2026.8469%204.46162C26.8469%203.05356%2025.7861%201.91211%2024.4775%201.91211C23.1689%201.91211%2022.1081%203.05356%2022.1081%204.46162C22.1081%205.86967%2023.1689%207.01112%2024.4775%207.01112Z'%20fill='white'/%3e%3cpath%20d='M29.2163%2011.7915V12.4288C29.2163%2012.9515%2028.8135%2013.3849%2028.3278%2013.3849H23.2928V13.0662C23.2928%2011.3198%2022.5109%209.7646%2021.3144%208.79579C21.8001%208.4771%2022.3806%208.28589%2022.9967%208.28589H25.9584C27.7591%208.28589%2029.2163%209.85383%2029.2163%2011.7915Z'%20fill='white'/%3e%3cpath%20d='M15%207.64852C16.9628%207.64852%2018.5541%205.93634%2018.5541%203.82426C18.5541%201.71218%2016.9628%200%2015%200C13.0371%200%2011.4459%201.71218%2011.4459%203.82426C11.4459%205.93634%2013.0371%207.64852%2015%207.64852Z'%20fill='white'/%3e%3cpath%20d='M18.2579%209.56064H11.7421C10.8782%209.56131%2010.0499%209.93087%209.4391%2010.5881C8.82826%2011.2454%208.48482%2012.1367%208.48419%2013.0662V14.9783C8.48419%2015.5061%208.88225%2015.9344%209.37271%2015.9344H20.6273C20.8629%2015.9344%2021.0889%2015.8337%2021.2555%2015.6544C21.4222%2015.4751%2021.5158%2015.2319%2021.5158%2014.9783V13.0662C21.5151%2012.1367%2021.1717%2011.2454%2020.5609%2010.5881C19.95%209.93087%2019.1217%209.56131%2018.2579%209.56064Z'%20fill='white'/%3e%3c/g%3e%3c/svg%3e",Ts="data:image/svg+xml,%3csvg%20width='20'%20height='21'%20viewBox='0%200%2020%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3cpath%20d='M16.8285%201.3381H16.0214V0.669048C16.0214%200.301071%2015.7204%200%2015.3524%200C14.9844%200%2014.6833%200.301071%2014.6833%200.669048V1.3381H10.669V0.669048C10.669%200.301071%2010.368%200%2010%200C9.63202%200%209.33095%200.301071%209.33095%200.669048V1.3381H5.31667V0.669048C5.31667%200.301071%205.01559%200%204.64762%200C4.27964%200%203.97857%200.301071%203.97857%200.669048V1.3381H3.17153C1.77071%201.34228%200.637513%202.47548%200.633331%203.8763V17.5332C0.637513%2018.934%201.77071%2020.0714%203.17153%2020.0714H16.8285C18.2293%2020.0672%2019.3667%2018.934%2019.3667%2017.5332V3.8763C19.3625%202.47548%2018.2293%201.34228%2016.8285%201.3381ZM8.46537%2013.1844L6.45823%2015.1916C6.19897%2015.4508%205.77245%2015.4508%205.5132%2015.1916L4.1751%2013.8535C3.90748%2013.5984%203.9033%2013.1719%204.15838%2012.9084C4.41345%2012.6408%204.83997%2012.6366%205.10341%2012.8917C5.10759%2012.8959%205.11595%2012.9043%205.12013%2012.9084L5.98571%2013.774L7.52034%2012.2394C7.78796%2011.9843%208.2103%2011.9885%208.46537%2012.2561C8.71626%2012.5154%208.71626%2012.9252%208.46537%2013.1844ZM8.46537%207.16299L6.45823%209.17014C6.19897%209.42939%205.77245%209.42939%205.5132%209.17014L4.1751%207.83204C3.90748%207.57697%203.9033%207.15045%204.15838%206.88701C4.41345%206.61939%204.83997%206.61521%205.10341%206.87028C5.10759%206.87447%205.11595%206.88283%205.12013%206.88701L5.98571%207.75259L7.52034%206.21796C7.78796%205.96289%208.2103%205.96707%208.46537%206.23469C8.71626%206.49394%208.71626%206.90374%208.46537%207.16299ZM15.3524%2014.719H10.669C10.3011%2014.719%2010%2014.418%2010%2014.05C10%2013.682%2010.3011%2013.381%2010.669%2013.381H15.3524C15.7204%2013.381%2016.0214%2013.682%2016.0214%2014.05C16.0214%2014.418%2015.7204%2014.719%2015.3524%2014.719ZM15.3524%208.69762H10.669C10.3011%208.69762%2010%208.39655%2010%208.02857C10%207.6606%2010.3011%207.35952%2010.669%207.35952H15.3524C15.7204%207.35952%2016.0214%207.6606%2016.0214%208.02857C16.0214%208.39655%2015.7204%208.69762%2015.3524%208.69762Z'%20fill='white'/%3e%3c/g%3e%3c/svg%3e",js="/assets/page-airdrop-Cvfm1Yhz.svg",Ns="/assets/soon-WBFuQPcg.svg",Ss=M(({model:e})=>s.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-10 select-none px-4 pb-4",children:s.jsxs("ul",{className:"flex flex-row rounded-xl bg-gray text-sm font-normal shadow-xl shadow-black",children:[s.jsx("li",{onClick:()=>{e.setActivePage("tap")},className:"flex-1 cursor-pointer pb-2",children:s.jsx("div",{className:"",children:s.jsxs("div",{className:"flex flex-col-reverse items-center gap-1 whitespace-nowrap",children:[e.activePage==="tap"&&s.jsx("div",{className:"absolute h-10 w-12 bg-purple5 blur-lg"}),s.jsx("img",{src:"./gang/"+(e.level??1).toString()+".png",className:"z-10 -mt-12 h-24"+(e.activePage==="tap"?"":" brightness-75")})]})})}),s.jsxs("li",{onClick:()=>{},className:"flex flex-1 cursor-pointer flex-col-reverse items-center py-2",children:[s.jsx("div",{className:e.activePage==="invest"?"":"opacity-30",children:s.jsxs("div",{className:"flex flex-col-reverse items-center gap-1 whitespace-nowrap",children:[s.jsx("span",{children:"Invest"}),s.jsx("img",{src:Cs,className:"h-5"})]})}),s.jsx("img",{src:Ns,className:"z-10 -my-2 w-12"})]}),s.jsx("li",{onClick:()=>{e.setActivePage("friends")},className:"flex-1 cursor-pointer py-2",children:s.jsx("div",{className:e.activePage==="friends"?"":"opacity-30",children:s.jsxs("div",{className:"flex flex-col-reverse items-center gap-1 whitespace-nowrap",children:[s.jsx("span",{children:"Friends"}),s.jsx("img",{src:ks,className:"h-5"})]})})}),s.jsxs("li",{onClick:()=>{e.setActivePage("tasks")},className:"relative flex-1 cursor-pointer py-2",children:[e.hasUndoneTasks&&s.jsx("div",{className:"absolute right-1/3 top-1 z-10 -ml-1 h-2 w-2 rounded-full bg-red-500"}),s.jsx("div",{className:e.activePage==="tasks"?"":"opacity-30",children:s.jsxs("div",{className:"flex flex-col-reverse items-center gap-1 whitespace-nowrap",children:[s.jsx("span",{children:"Tasks"}),s.jsx("img",{src:Ts,className:"h-5"})]})})]}),s.jsx("li",{onClick:()=>{e.setActivePage("airdrop")},className:"relative flex-1 cursor-pointer py-2",children:s.jsx("div",{children:s.jsxs("div",{className:"flex flex-col-reverse items-center gap-1 whitespace-nowrap",children:[s.jsx("span",{className:e.activePage==="airdrop"?"":"opacity-30",children:"Airdrop"}),s.jsx("img",{src:js,className:"-mb-1 -mt-1 h-7"})]})})})]})})),Ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA7CAYAAADFJfKzAAAEDmlDQ1BrQ0dDb2xvclNwYWNlR2VuZXJpY1JHQgAAOI2NVV1oHFUUPpu5syskzoPUpqaSDv41lLRsUtGE2uj+ZbNt3CyTbLRBkMns3Z1pJjPj/KRpKT4UQRDBqOCT4P9bwSchaqvtiy2itFCiBIMo+ND6R6HSFwnruTOzu5O4a73L3PnmnO9+595z7t4LkLgsW5beJQIsGq4t5dPis8fmxMQ6dMF90A190C0rjpUqlSYBG+PCv9rt7yDG3tf2t/f/Z+uuUEcBiN2F2Kw4yiLiZQD+FcWyXYAEQfvICddi+AnEO2ycIOISw7UAVxieD/Cyz5mRMohfRSwoqoz+xNuIB+cj9loEB3Pw2448NaitKSLLRck2q5pOI9O9g/t/tkXda8Tbg0+PszB9FN8DuPaXKnKW4YcQn1Xk3HSIry5ps8UQ/2W5aQnxIwBdu7yFcgrxPsRjVXu8HOh0qao30cArp9SZZxDfg3h1wTzKxu5E/LUxX5wKdX5SnAzmDx4A4OIqLbB69yMesE1pKojLjVdoNsfyiPi45hZmAn3uLWdpOtfQOaVmikEs7ovj8hFWpz7EV6mel0L9Xy23FMYlPYZenAx0yDB1/PX6dledmQjikjkXCxqMJS9WtfFCyH9XtSekEF+2dH+P4tzITduTygGfv58a5VCTH5PtXD7EFZiNyUDBhHnsFTBgE0SQIA9pfFtgo6cKGuhooeilaKH41eDs38Ip+f4At1Rq/sjr6NEwQqb/I/DQqsLvaFUjvAx+eWirddAJZnAj1DFJL0mSg/gcIpPkMBkhoyCSJ8lTZIxk0TpKDjXHliJzZPO50dR5ASNSnzeLvIvod0HG/mdkmOC0z8VKnzcQ2M/Yz2vKldduXjp9bleLu0ZWn7vWc+l0JGcaai10yNrUnXLP/8Jf59ewX+c3Wgz+B34Df+vbVrc16zTMVgp9um9bxEfzPU5kPqUtVWxhs6OiWTVW+gIfywB9uXi7CGcGW/zk98k/kmvJ95IfJn/j3uQ+4c5zn3Kfcd+AyF3gLnJfcl9xH3OfR2rUee80a+6vo7EK5mmXUdyfQlrYLTwoZIU9wsPCZEtP6BWGhAlhL3p2N6sTjRdduwbHsG9kq32sgBepc+xurLPW4T9URpYGJ3ym4+8zA05u44QjST8ZIoVtu3qE7fWmdn5LPdqvgcZz8Ww8BWJ8X3w0PhQ/wnCDGd+LvlHs8dRy6bLLDuKMaZ20tZrqisPJ5ONiCq8yKhYM5cCgKOu66Lsc0aYOtZdo5QCwezI4wm9J/v0X23mlZXOfBjj8Jzv3WrY5D+CsA9D7aMs2gGfjve8ArD6mePZSeCfEYt8CONWDw8FXTxrPqx/r9Vt4biXeANh8vV7/+/16ffMD1N8AuKD/A/8leAvFY9bLAAAAOGVYSWZNTQAqAAAACAABh2kABAAAAAEAAAAaAAAAAAACoAIABAAAAAEAAAA7oAMABAAAAAEAAAA7AAAAADqlaz0AAAnXSURBVGgF3ZoJjFVFFoZpWQQFARERcHkIoiKyqOggis0QZxhwQIMLaiQQcYkaE7doXEbciLtxYTTOMGCGMU7EBY0BA0KroMYlDbiL8hpwAQQhIAKy+f23q571quu+e1/360Y4yd/n1DnnnqpTVbeqbr0ua1SAdu7cOQTzeeBgsA0sBnPAq2VlZdvhu4RoV4aKR4K+oD0oAx+Af9GuKnhxRMBJII5WYfhHcRHr7k2dXcEcsAOEaAXK3kXVxAP9QpECuqfQqVfrnajnOLA00AZfVRnXmCYxBk3fNHQZTllwn+9MC/ZC1w30A01BO4O94Y3Br2AjWA3Wgx/AAqahynlErNYoXgCH5hnChT74dyLO92Gzp8X5FpBEm3C4H7S1jyN3AGPANLAa1IYW8dDjoBzkZg3yYPANSEMdbJsSOdFGJERchv14Gwi5G3gBbAalpCzBxjn1lFG+M6ECzZD0RLAWYGNMUPV8J0WD7w/+HeNXSrXe1QtsBsgXFQg+0fql5gS7ORDwU3R6f5SoFoyqgE99qh4huN5/1T8M6FVySTOuo+xFEw8+6UTKIkcLBPx88CPYFTSfSvdTMvDrnQZoOzyxUJK5BSDOiQDXYbsCjGaFU0XHIr8BtJn7NA/F10Ar8eHgFFAMrcP5dbAJaAZpJdeBxqeZKIbSHuX6EnIbcC3lSt+x6DIBtV2oJ/WOhqbul+hrJIZO+3UWJNF2HCaC6BWxDaTcDNwOQjTBtCma1vaZknFqDC1Gi9HvYyrWwtYfaJvQ6KqDWoIPQCG62TYSp05gKOju6IZQ3gp8yu0I1rcknFp6+jVR1ip5mCqAa7taAyytRBhsbJ2R11qDxyfbBqJ/1rO9Q9m+n7d5NhXn2mdLygn8TKCyu00yGWxbAvaf0fUxPhMCdo1WxtgfDNilmmXsrZC/C/gMkL1kRAVKRu+VT11VCcrnfYNTnm58ejs6Kz5nbDrgF6JTjZ+2Hp8ekC0NRe9VCsc/4+P7VrH6fUPNmmYjvRhaVZcb3en4tMR3IeVVnt98U3ZH52PPR8URRvdZwDaO+NGaEbDlqfwE8oxO4a+ObEWbzP4o/C1M35nCTtAC2I3eP8ptwCY6upo1mkKn9EJ+zJQt62KEZVbhcG07JzvlWDFtsjW2FSIW6s2B2PWu2k7YYVpguSnm2FYjdWeUjkI+PGepFpqYsjovRCeFlL7OBvH1uTKVq+LoLJxTVgtdsKmzNFqatuphS89YAb7cTHfV1cPRSzzElBcZrhH63MguqzAF/3nrY0feloM8zch2Cz7ZqJGm70AS2QIvdPh+0jw/DK7DiUZxM9Ao2ddjNvJaEEcvGkPvGIeeMfo8deLI4p3JeyK/cCXFCnA/OB+0AlqINDr6CNcH9PNApGNgc9M5WsE1xVvKgG4d5b8gDgL7AnWwcAK4A7v28wzyKBAiO0NCtvQ6KrkVhEj3QB+DzooG1z6oBEpGxNNMiAj5JrAchEizK5ESG0fke4lyo4mkBeZD8BL4Dz2+yugjhq9eCyXfDmg11j6cATrMS98aaKtqBn4Bmrr2nc8iLwELwLdgGfHtak2xmqhjANIlQK/AQdXa6G8L/PV61J4I/gDQUe9e0NGNRLkM9AU3gNdAba9ieDRIuiiYDM4GB7p1S0Z3JngbiDT960YE0Zk4t9IiNwU6qL8MdP5tKNJrUwnU6Ue6WVHuAdKsP+5j8TLBjgAPAfewT3GX0WxqHgMax7e6SAvBjgGTwDbwR6Qsjapb0gTQ6qqbvI1gd6AlNHJgkWMZvfiH8uBXu0OGgTaOj0u4xtbDw8fhPBdoi9hdaToNv5CtaKObQF6yJKrbOZ10cqsv8s9AD6sDvgPaI8vBWSADGpJ0xKwA08BSoLKOkKOBPiBcmkVhGAlvdZWRTKIZkAUuPUZBB4IahL4xuAqsBw1Bc6nkTzUaYhTYzgFZ4NLDQX88prleyOOtI7JW5CuAbgp0FzTUsWkf1qGjPmk6waPXCn4AuBhoG7wbjAQ6k+uQobUmC1wabtsacSznulZkHQetbTzl0JXMW+gzcoKPAvVFWQJHBwb4BSDUsfKJLgDgXT2f9yj//nVH4X1gSYnZJO6wyhj+LvooEHxejE9d1eeaDv17QiB1QnRWhmsGunS6YmhUdM3pkhYi6XV/m2aPvd74X+oGKZG8RrFFxNMXVhK9aHyP8hxnSK9R8Tfi92SABoF9IqnwnxHGrNWv1PSpAtLwHrCeKYJHCxgr8Bf4rnD8B0hWsv0dpUTbm909fVzRrtb6XCs1/WQCdk4Z+CA6xm6nNg89qtNgeyWrb06XdN0iWlnNEv/ab9r2iZ7FO9i2fJ/y0Z8YVe29orbVLPe3o5LVVadLdrpo/m93DTGyvXbR5l5qOkwBSUDTOU3CH8mfUdSVjn9J2EbJ/ioHhwbi3IYKNOefcPQhsQrlP43h0pBDHXXaN8tNjHsSYv2C/TLjMy7gu0O98D/g09PWGcOjvtGUF8O7yA+uX+7qi3K/EFBB3H3YGmx/M21RB4X24mPVUJ1EQnSdk3A5DhPBDPBfMBpE52d4BqwA9UkTnLboEuEuMBM8B24AuvNSLvr9eAEIUXM5jAlZjG48vLWtyOfYdAek/2NoCFJiGb8NtoytN/gwpiGb5KcLsw5wd0+yz1tehTAJfAK0FagXDwSjQDloSFpNZVo43wDaLZoDXQIOB9rvtQaFqII1aFC0J5Hwl3h0D3ntIbqxJDvF9sTUPSSpUBr6tTHaHm2yD6LIhjz3AN1URjW6sbBHKy1UZ9se2AMStClUIvQn2S1S2JHVKWUa5VukbADa0QB1aKaOtImqvtzI2soZ4WuQ9duOVulS0AaCvAveBPOAvki0qmtBPBqcAfoYwEpCFUQZS6JVidFIOAOmAv03S21IJ5o54HKwX2KFOODXCzwBKkHoZgR1Ii3B4+q4+mqMrOvIg9pPdQw7E6j3M8Cn9Si+Be8DvSMaxY/o1dxUJY5OWxeBU8BJQHv1IrAQvILvTHiO8Je9HzgNHA/sr4G51w6daBPQtjkbvEacCngsFUzWf4pG7I1OHaDfV5TMOipQsjUI354o1Una7CXrABBHmtaa5v8Hs4ipch4RT4mqE+yvdZuRV+Gb69S8B+qrQEOizym4fuGbDL4GtSX9pjQLjFF74W1AoY5KnVaxIzuEyA8BLeVNQSugj/bN9HA7GtUCWZ9apaApxBxLzOEEmw7WghVAdTcB27D3hacmPVQMqULdB/m01Cia+YYSlFeaGG3hgqXPrZCWFzWyCkpPa8HQCFrSO/MZvbxOCuy6XRgMNAt6gSNBGtKMWAjmgxngHWLqvUysUz5pqOhk0wT1fegALSrqBK3KdvS3IW8AuhhbSWJb4fVKvwFH2uWmWbNdlwAAAABJRU5ErkJggg==",z="/assets/coin-simple-DAtgwfMa.svg",Ws="/assets/tap-DwglmcxY.png",_s="data:image/svg+xml,%3csvg%20width='22'%20height='29'%20viewBox='0%200%2022%2029'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M20.6859%2012.6415L15.6732%2011.2249C15.264%2011.1092%2015.0319%2010.6789%2015.1616%2010.2763L17.5519%202.85598C17.9113%202.38761%2017.9%201.71609%2017.4919%201.25663C17.028%200.734793%2016.2276%200.684377%2015.7041%201.14456L0.775237%2014.2743C0.251839%2014.7346%200.203621%2015.5312%200.667467%2016.0534C0.831997%2016.2392%201.04785%2016.3726%201.28794%2016.4368C1.33165%2016.4486%201.37601%2016.4569%201.42055%2016.464C1.46285%2016.4803%201.50618%2016.4948%201.55099%2016.5068L5.30512%2017.5127C5.76101%2017.6349%205.99311%2018.1401%205.78722%2018.562L1.95025%2026.4265C1.52842%2026.8681%201.48018%2027.5619%201.8663%2028.0614C2.03574%2028.2813%202.27331%2028.4395%202.54203%2028.5113C2.90986%2028.6098%203.31768%2028.543%203.64245%2028.2945L21.0471%2014.9819C21.2075%2014.8592%2021.3357%2014.6998%2021.4209%2014.5171C21.4809%2014.42%2021.5295%2014.3138%2021.562%2014.1986C21.7515%2013.5289%2021.3592%2012.8318%2020.6859%2012.6415Z'%20fill='url(%23paint0_linear_18_82)'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_18_82'%20x1='14.7896'%20y1='0.315591'%20x2='14.7896'%20y2='21.7656'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F7C243'/%3e%3cstop%20offset='1'%20stop-color='%23FD902B'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e";let Ee=0;const Ps=M(({model:e})=>{var t;return s.jsxs("div",{className:"flex h-screen select-none flex-col",children:[s.jsxs("div",{onClick:()=>{e.levelProgress!=null&&e.showLevel(e.level??1)},className:"flex cursor-pointer flex-row",children:[s.jsxs("div",{className:"relative z-0 flex flex-none flex-row items-center gap-3",children:[s.jsx("img",{src:"https://t.me/i/userpic/160/"+e.username+".jpg",className:"absolute z-10 ml-4 mr-3 h-12 w-12 rounded-xl",onError:n=>{n.currentTarget.remove()}}),s.jsx("div",{className:"ml-4 h-12 w-12 rounded-xl bg-gradient-to-b from-purple1 to-purple2 p-2",children:s.jsx("img",{src:Ye,className:"h-full w-full"})}),s.jsxs("div",{className:"flex max-w-52 flex-col overflow-hidden",children:[s.jsx("p",{className:"truncate",children:e.firstName}),s.jsx("p",{children:e.levels.length>=(e.level??1)&&s.jsx("b",{className:"font-bold",children:e.levels[(e.level??1)-1].name})})]})]}),s.jsxs("div",{className:"ml-auto mt-auto",children:[s.jsx("div",{className:"pl-4 pr-16"+(e.levels.length>=(e.level??1)?"":" invisible"),children:s.jsxs("div",{className:"flex flex-row gap-3 text-xs",children:[s.jsx("div",{children:"Level"}),s.jsxs("div",{children:[e.level,s.jsxs("span",{className:"opacity-50",children:["/",e.levels.length]})]})]})}),s.jsxs("div",{className:"relative mx-4 rounded-full border border-gray4 border-opacity-70"+(e.levelProgress==null?" invisible":""),children:[s.jsx("div",{className:"absolute h-2 rounded-full bg-gradient-to-r from-purple10 via-purple11 to-purple12",style:{width:(((t=e.levelProgress)==null?void 0:t.toString())??"0")+"%"}}),s.jsx("div",{className:"h-2 rounded-full bg-gray2"})]})]})]}),s.jsx("div",{className:"-z-10 -mb-36 h-36 flex-none bg-gradient-to-b from-black to-purple3"}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"flex flex-row gap-2 overflow-x-auto overflow-y-hidden px-4 pb-3 pt-3",children:[e.showDailyStreakShortcut&&s.jsxs("div",{className:"flex w-32 flex-none cursor-pointer flex-col items-center gap-1 rounded-xl border border-purple4 bg-gradient-to-t from-gray3 to-gray2 p-2",onClick:()=>{e.showDailyStreak(!0)},children:[s.jsx("img",{src:"https://media.hipogang.io/task/dailystreak.png",className:"h-8 object-contain"}),s.jsx("div",{className:"text-sm",children:"Daily Reward"})]}),e.showPostStoryShortcut&&s.jsxs("div",{className:"flex w-32 flex-none cursor-pointer flex-col items-center gap-1 rounded-xl border border-purple4 bg-gradient-to-t from-gray3 to-gray2 p-2",onClick:e.showLevelUpStory,children:[s.jsx("img",{src:"https://media.hipogang.io/task/levelupstory.png",className:"h-8 object-contain"}),s.jsx("div",{className:"text-sm",children:"Post Story"})]})]})}),s.jsxs("div",{className:"flex flex-1 flex-col rounded-4xl border-t-2 border-t-purple3 bg-black pb-20 pt-8",children:[s.jsxs("div",{className:"flex flex-none flex-row items-center justify-center",children:[s.jsx("img",{src:z}),s.jsx("div",{className:"px-2 font-bold "+(e.points!=null&&e.points>1e15?"text-2xl":e.points!=null&&e.points>1e12?"text-3xl":e.points!=null&&e.points>1e9?"text-4xl":"text-5xl"),children:e.pointsTransFormatted})]}),s.jsxs("div",{className:"relative flex flex-1 cursor-pointer touch-none items-center justify-center",onPointerDown:n=>{Ee<3&&(Ee+=1,e.tap(n.clientX,n.clientY))},onPointerUp:()=>{Ee>0&&(Ee-=1)},children:[s.jsx("img",{src:Ws,className:"absolute h-[50vh] object-contain"}),s.jsx("img",{src:"./gang/"+(e.level??1).toString()+".png",className:"relative h-[50vh] object-contain"}),e.levels.map((n,a)=>s.jsx("img",{src:"./gang/"+(a+1).toString()+".png",className:"hidden",loading:"lazy"},a))]})]}),s.jsxs("div",{className:"fixed bottom-24 right-4 flex flex-row-reverse items-center",children:[s.jsx("img",{src:_s,className:"h-6"}),e.levelEnergy>0&&s.jsxs("span",{className:"mr-2 text-sm font-medium",children:[e.remainEnergyFormatted," / ",e.levelEnergyFormatted]})]})]})}),mt=new Map([["mainnet",_.Address.parse("EQCLyZHP4Xe8fpchQz76O-_RmUhaVc_9BAoGyJrwJrcbz2eZ")],["testnet",_.Address.parse("kQAlDMBKCT8WJ4nwdwNRp0lvKMP4vUnHYspFPhEnyR36cg44")]]),Es=1027039654,Bs=100000000n,Ds=200000000n;function Fs(e){return e-=Ds,e>0n?e:0n}function Ls(e,t,n){const a=e.toString(),o=(t+Bs).toString(),d=void 0,g=_.beginCell().storeUint(Es,32).storeUint(0,64).storeAddress(null).storeCoins(t).storeCoins(1n).storeAddress(n).endCell().toBoc().toString("base64");return{address:a,amount:o,stateInit:d,payload:g}}var gt;(function(e){e[e.Open=0]="Open",e[e.Distributing=1]="Distributing",e[e.Staked=2]="Staked",e[e.Validating=3]="Validating",e[e.Held=4]="Held",e[e.Recovering=5]="Recovering",e[e.Burning=6]="Burning"})(gt||(gt={}));const jt={serialize:function(){},parse:function(){return{}}},Is={serialize:function(e,t){t.storeRef(_.beginCell().storeDictDirect(e))},parse:function(e){return e.loadRef().beginParse().loadDictDirect(_.Dictionary.Keys.BigUint(256),jt)}},he={serialize:function(e,t){t.storeCoins(e.minPayment).storeUint(e.borrowerRewardShare,8).storeCoins(e.loanAmount).storeCoins(e.accrueAmount).storeCoins(e.stakeAmount).storeRef(e.newStakeMsg)},parse:function(e){return{minPayment:e.loadCoins(),borrowerRewardShare:e.loadUintBig(8),loanAmount:e.loadCoins(),accrueAmount:e.loadCoins(),stakeAmount:e.loadCoins(),newStakeMsg:e.loadRef()}}},Os={serialize:function(e,t){t.storeUint(e.state??0,4).storeUint(e.size??0,16).storeDict(e.sorted).storeDict(e.requests).storeDict(e.rejected).storeDict(e.accepted).storeDict(e.accrued).storeDict(e.staked).storeDict(e.recovering).storeCoins(e.totalStaked??0).storeCoins(e.totalRecovered??0).storeUint(e.currentVsetHash??0,256).storeUint(e.stakeHeldFor??0,32).storeUint(e.stakeHeldUntil??0,32)},parse:function(e){return{state:e.loadUint(4),size:e.loadUintBig(16),sorted:e.loadDict(_.Dictionary.Keys.BigUint(112),Is),requests:e.loadDict(_.Dictionary.Keys.BigUint(256),he),rejected:e.loadDict(_.Dictionary.Keys.BigUint(256),he),accepted:e.loadDict(_.Dictionary.Keys.BigUint(256),he),accrued:e.loadDict(_.Dictionary.Keys.BigUint(256),he),staked:e.loadDict(_.Dictionary.Keys.BigUint(256),he),recovering:e.loadDict(_.Dictionary.Keys.BigUint(256),he),totalStaked:e.loadCoins(),totalRecovered:e.loadCoins(),currentVsetHash:e.loadUintBig(256),stakeHeldFor:e.loadUintBig(32),stakeHeldUntil:e.loadUintBig(32)}}};class Xe{constructor(t){this.address=t}static createFromAddress(t){return new Xe(t)}async getTimes(t){const{stack:n}=await t.get("get_times",[]);return{currentRoundSince:n.readBigNumber(),participateSince:n.readBigNumber(),participateUntil:n.readBigNumber(),nextRoundSince:n.readBigNumber(),nextRoundUntil:n.readBigNumber(),stakeHeldFor:n.readBigNumber()}}async getTreasuryState(t){const{stack:n}=await t.get("get_treasury_state",[]);return{totalCoins:n.readBigNumber(),totalTokens:n.readBigNumber(),totalStaking:n.readBigNumber(),totalUnstaking:n.readBigNumber(),totalBorrowersStake:n.readBigNumber(),parent:n.readAddressOpt(),participations:_.Dictionary.loadDirect(_.Dictionary.Keys.BigUint(32),Os,n.readCellOpt()),roundsImbalance:n.readBigNumber(),stopped:n.readBoolean(),instantMint:n.readBoolean(),loanCodes:_.Dictionary.loadDirect(_.Dictionary.Keys.BigUint(32),_.Dictionary.Values.Cell(),n.readCell()),lastStaked:n.readBigNumber(),lastRecovered:n.readBigNumber(),halter:n.readAddress(),governor:n.readAddress(),proposedGovernor:n.readCellOpt(),governanceFee:n.readBigNumber(),collectionCodes:_.Dictionary.loadDirect(_.Dictionary.Keys.BigUint(32),_.Dictionary.Values.Cell(),n.readCell()),billCodes:_.Dictionary.loadDirect(_.Dictionary.Keys.BigUint(32),_.Dictionary.Values.Cell(),n.readCell()),oldParents:_.Dictionary.loadDirect(_.Dictionary.Keys.BigUint(256),jt,n.readCellOpt())}}}class Fe{constructor(t){this.address=t}static createFromAddress(t){return new Fe(t)}async getWalletAddress(t,n){const a=new _.TupleBuilder;a.writeAddress(n);const{stack:o}=await t.get("get_wallet_address",a.build());return o.readAddress()}}class Le{constructor(t){this.address=t}static createFromAddress(t){return new Le(t)}async getWalletState(t){const{stack:n}=await t.get("get_wallet_state",[]);return{tokens:n.readBigNumber(),staking:_.Dictionary.loadDirect(_.Dictionary.Keys.BigUint(32),_.Dictionary.Values.BigVarUint(4),n.readCellOpt()),unstaking:n.readBigNumber()}}}var Q={},Oe={},H=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof ut<"u"&&ut||{},q={searchParams:"URLSearchParams"in H,iterable:"Symbol"in H&&"iterator"in Symbol,blob:"FileReader"in H&&"Blob"in H&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in H,arrayBuffer:"ArrayBuffer"in H};function Us(e){return e&&DataView.prototype.isPrototypeOf(e)}if(q.arrayBuffer)var Ms=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Hs=ArrayBuffer.isView||function(e){return e&&Ms.indexOf(Object.prototype.toString.call(e))>-1};function fe(e){if(typeof e!="string"&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||e==="")throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function $e(e){return typeof e!="string"&&(e=String(e)),e}function et(e){var t={next:function(){var n=e.shift();return{done:n===void 0,value:n}}};return q.iterable&&(t[Symbol.iterator]=function(){return t}),t}function U(e){this.map={},e instanceof U?e.forEach(function(t,n){this.append(n,t)},this):Array.isArray(e)?e.forEach(function(t){if(t.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}U.prototype.append=function(e,t){e=fe(e),t=$e(t);var n=this.map[e];this.map[e]=n?n+", "+t:t};U.prototype.delete=function(e){delete this.map[fe(e)]};U.prototype.get=function(e){return e=fe(e),this.has(e)?this.map[e]:null};U.prototype.has=function(e){return this.map.hasOwnProperty(fe(e))};U.prototype.set=function(e,t){this.map[fe(e)]=$e(t)};U.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)};U.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),et(e)};U.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),et(e)};U.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),et(e)};q.iterable&&(U.prototype[Symbol.iterator]=U.prototype.entries);function Je(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}}function Nt(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function Rs(e){var t=new FileReader,n=Nt(t);return t.readAsArrayBuffer(e),n}function Vs(e){var t=new FileReader,n=Nt(t),a=/charset=([A-Za-z0-9_-]+)/.exec(e.type),o=a?a[1]:"utf-8";return t.readAsText(e,o),n}function qs(e){for(var t=new Uint8Array(e),n=new Array(t.length),a=0;a<t.length;a++)n[a]=String.fromCharCode(t[a]);return n.join("")}function vt(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function St(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?typeof e=="string"?this._bodyText=e:q.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:q.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:q.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():q.arrayBuffer&&q.blob&&Us(e)?(this._bodyArrayBuffer=vt(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):q.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||Hs(e))?this._bodyArrayBuffer=vt(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof e=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):q.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},q.blob&&(this.blob=function(){var e=Je(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=Je(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(q.blob)return this.blob().then(Rs);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var e=Je(this);if(e)return e;if(this._bodyBlob)return Vs(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(qs(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},q.formData&&(this.formData=function(){return this.text().then(Js)}),this.json=function(){return this.text().then(JSON.parse)},this}var zs=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Gs(e){var t=e.toUpperCase();return zs.indexOf(t)>-1?t:e}function ce(e,t){if(!(this instanceof ce))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{};var n=t.body;if(e instanceof ce){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new U(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!n&&e._bodyInit!=null&&(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new U(t.headers)),this.method=Gs(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in H){var d=new AbortController;return d.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),(this.method==="GET"||this.method==="HEAD")&&(t.cache==="no-store"||t.cache==="no-cache")){var a=/([?&])_=[^&]*/;if(a.test(this.url))this.url=this.url.replace(a,"$1_="+new Date().getTime());else{var o=/\?/;this.url+=(o.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}ce.prototype.clone=function(){return new ce(this,{body:this._bodyInit})};function Js(e){var t=new FormData;return e.trim().split("&").forEach(function(n){if(n){var a=n.split("="),o=a.shift().replace(/\+/g," "),d=a.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(d))}}),t}function Ks(e){var t=new U,n=e.replace(/\r?\n[\t ]+/g," ");return n.split("\r").map(function(a){return a.indexOf(`
`)===0?a.substr(1,a.length):a}).forEach(function(a){var o=a.split(":"),d=o.shift().trim();if(d){var g=o.join(":").trim();try{t.append(d,g)}catch(x){console.warn("Response "+x.message)}}}),t}St.call(ce.prototype);function X(e,t){if(!(this instanceof X))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=t.status===void 0?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===void 0?"":""+t.statusText,this.headers=new U(t.headers),this.url=t.url||"",this._initBody(e)}St.call(X.prototype);X.prototype.clone=function(){return new X(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new U(this.headers),url:this.url})};X.error=function(){var e=new X(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var Qs=[301,302,303,307,308];X.redirect=function(e,t){if(Qs.indexOf(t)===-1)throw new RangeError("Invalid status code");return new X(null,{status:t,headers:{location:e}})};var ae=H.DOMException;try{new ae}catch{ae=function(t,n){this.message=t,this.name=n;var a=Error(t);this.stack=a.stack},ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae}function Wt(e,t){return new Promise(function(n,a){var o=new ce(e,t);if(o.signal&&o.signal.aborted)return a(new ae("Aborted","AbortError"));var d=new XMLHttpRequest;function g(){d.abort()}d.onload=function(){var h={statusText:d.statusText,headers:Ks(d.getAllResponseHeaders()||"")};o.url.indexOf("file://")===0&&(d.status<200||d.status>599)?h.status=200:h.status=d.status,h.url="responseURL"in d?d.responseURL:h.headers.get("X-Request-URL");var w="response"in d?d.response:d.responseText;setTimeout(function(){n(new X(w,h))},0)},d.onerror=function(){setTimeout(function(){a(new TypeError("Network request failed"))},0)},d.ontimeout=function(){setTimeout(function(){a(new TypeError("Network request timed out"))},0)},d.onabort=function(){setTimeout(function(){a(new ae("Aborted","AbortError"))},0)};function x(h){try{return h===""&&H.location.href?H.location.href:h}catch{return h}}if(d.open(o.method,x(o.url),!0),o.credentials==="include"?d.withCredentials=!0:o.credentials==="omit"&&(d.withCredentials=!1),"responseType"in d&&(q.blob?d.responseType="blob":q.arrayBuffer&&(d.responseType="arraybuffer")),t&&typeof t.headers=="object"&&!(t.headers instanceof U||H.Headers&&t.headers instanceof H.Headers)){var S=[];Object.getOwnPropertyNames(t.headers).forEach(function(h){S.push(fe(h)),d.setRequestHeader(h,$e(t.headers[h]))}),o.headers.forEach(function(h,w){S.indexOf(w)===-1&&d.setRequestHeader(w,h)})}else o.headers.forEach(function(h,w){d.setRequestHeader(w,h)});o.signal&&(o.signal.addEventListener("abort",g),d.onreadystatechange=function(){d.readyState===4&&o.signal.removeEventListener("abort",g)}),d.send(typeof o._bodyInit>"u"?null:o._bodyInit)})}Wt.polyfill=!0;H.fetch||(H.fetch=Wt,H.Headers=U,H.Request=ce,H.Response=X);self.fetch.bind(self);var Zs=De&&De.__awaiter||function(e,t,n,a){function o(d){return d instanceof n?d:new n(function(g){g(d)})}return new(n||(n=Promise))(function(d,g){function x(w){try{h(a.next(w))}catch(P){g(P)}}function S(w){try{h(a.throw(w))}catch(P){g(P)}}function h(w){w.done?d(w.value):o(w.value).then(x,S)}h((a=a.apply(e,t||[])).next())})};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.Nodes=void 0;class Ys{constructor(){this.nodeIndex=-1,this.committee=new Set,this.topology=[],this.initTime=0}init(t){return Zs(this,void 0,void 0,function*(){this.nodeIndex=-1,this.committee.clear(),this.topology=[],this.initTime=Date.now();let n=[];try{n=yield(yield fetch(t)).json()}catch(a){throw new Error(`exception in fetch(${t}): ${a}`)}for(const a of n)a.Healthy==="1"&&this.topology.push(a);if(this.topology.length===0)throw new Error(`no healthy nodes in ${t}`)})}getHealthyFor(t){var n;const a=[];for(const o of this.topology)o.Weight>0&&(!((n=o.Mngr)===null||n===void 0)&&n.health[t])&&a.push(o);return a}}Oe.Nodes=Ys;const Xs="@orbs-network/ton-access",$s="2.3.3",en="Unthrottled anonymous RPC access to TON blockchain via a robust decentralized network",tn="lib/index.js",sn="lib/index.js",nn="lib/index.d.ts",rn=["lib/**/*"],on={test:"env mocha -r ts-node/register test/**/*.ts","test:v2":"env mocha -r ts-node/register test/ton-v2.ts","test:v4":"env mocha -r ts-node/register test/ton-v4.ts",cleanup:"rimraf ./lib","build:web:reg":"esbuild ./lib/web.js --bundle  --sourcemap --target=es2015 --outfile=./dist/index.js","build:web:min":"esbuild ./lib/web.js --bundle  --minify    --target=es2015 --outfile=./dist/index.min.js","build:web":"rimraf ./dist && npm run build:web:reg && npm run build:web:min",build:"npm run lint && rimraf ./lib && tsc && npm run build:web",format:'prettier --write "src/**/*.ts"',lint:"tslint -p tsconfig.json",prepare:"npm run build",prepublishOnly:"npm test && npm run lint",preversion:"npm run lint",version:"npm run format && git add -A src",postversion:"git push && git push --tags"},an={type:"git",url:"git+https://github.com/orbs-network/ton-access.git"},ln="yuval@orbs.com",cn="MIT",dn={url:"https://github.com/orbs-network/ton-access/issues"},un="https://github.com/orbs-network/ton-access#readme",hn={"isomorphic-fetch":"^3.0.0"},pn={"@types/bn.js":"^5.1.1","@types/chai":"^4.3.4","@types/isomorphic-fetch":"^0.0.36","@types/mocha":"^10.0.0",buffer:"^6.0.3",chai:"^4.3.7",esbuild:"^0.15.14",mocha:"^10.1.0",prettier:"^2.7.1",rimraf:"^3.0.2",ton:"^12.1.3","ton-lite-client":"npm:@truecarry/ton-lite-client@^1.6.1",tonweb:"^0.0.58","ts-node":"^10.9.1",tslib:"^2.4.0",tslint:"^6.1.3","tslint-config-prettier":"^1.18.0"},fn={name:Xs,version:$s,description:en,source:tn,main:sn,types:nn,files:rn,scripts:on,repository:an,author:ln,license:cn,bugs:dn,homepage:un,dependencies:hn,devDependencies:pn};var me=De&&De.__awaiter||function(e,t,n,a){function o(d){return d instanceof n?d:new n(function(g){g(d)})}return new(n||(n=Promise))(function(d,g){function x(w){try{h(a.next(w))}catch(P){g(P)}}function S(w){try{h(a.throw(w))}catch(P){g(P)}}function h(w){w.done?d(w.value):o(w.value).then(x,S)}h((a=a.apply(e,t||[])).next())})};Object.defineProperty(Q,"__esModule",{value:!0});var _t=Q.getHttpV4Endpoint=Q.getHttpV4Endpoints=Q.getHttpEndpoint=Q.getHttpEndpoints=Q.Access=void 0;const mn=Oe;class Pt{constructor(){this.host="ton.access.orbs.network",this.urlVersion=1,this.nodes=new mn.Nodes}init(){return me(this,void 0,void 0,function*(){const t=fn;yield this.nodes.init(`https://${this.host}/mngr/nodes?npm_version=${t.version}`)})}makeProtonet(t,n){let a="";switch(t){case"toncenter-api-v2":a+="v2-";break;case"ton-api-v4":a+="v4-";break}return a+=n,a}weightedRandom(t){let n=0;for(const d of t)n+=d.Weight;const a=Math.floor(Math.random()*n);let o=0;for(const d of t){if(a>=o&&a<o+d.Weight)return d;o+=d.Weight}}buildUrls(t,n,a,o){a||(a=""),n||(n="toncenter-api-v2"),t||(t="mainnet"),a.length&&(a=a.replace(/^\/+/,""));const d=[],g=this.makeProtonet(n,t);let x=this.nodes.getHealthyFor(g);if(!(x!=null&&x.length))throw new Error(`no healthy nodes for ${g}`);if(o&&x.length){const S=this.weightedRandom(x);if(S)x=[S];else throw new Error("weightedRandom return empty")}for(const S of x){let h=`https://${this.host}/${S.NodeId}/${this.urlVersion}/${t}/${n}`;a.length&&(h+=`/${a}`),d.push(h)}return d}}Q.Access=Pt;function Et(e,t,n,a){return me(this,void 0,void 0,function*(){const o=new Pt;return yield o.init(),o.buildUrls(e,t,n,a)})}function Bt(e,t){return me(this,void 0,void 0,function*(){const n=e!=null&&e.network?e.network:"mainnet";let a="jsonRPC";return(e==null?void 0:e.protocol)==="rest"&&(a=""),yield Et(n,"toncenter-api-v2",a,t)})}Q.getHttpEndpoints=Bt;function gn(e){return me(this,void 0,void 0,function*(){return(yield Bt(e,!0))[0]})}Q.getHttpEndpoint=gn;function Dt(e,t){return me(this,void 0,void 0,function*(){const n=e!=null&&e.network?e.network:"mainnet";if((e==null?void 0:e.protocol)==="json-rpc")throw Error("config.protocol json-rpc is not supported for getTonApiV4Endpoints");return yield Et(n,"ton-api-v4","",t)})}Q.getHttpV4Endpoints=Dt;function vn(e){return me(this,void 0,void 0,function*(){return(yield Dt(e,!0))[0]})}_t=Q.getHttpV4Endpoint=vn;const V=8;let Be=1;const xn=1e3,Ke=1e3,xt=1e3,bt=1e4,wt=6e3,bn=500,wn=5e3,yn=1e3,An=1e3,Cn=3e4,kn=3e3,Tn="https://t.me/HipoGangBot/join?startapp=",je={internalServerError:4500,accountBlocked:4501,invalidInviteLink:4502,invitationBlocked:4503,inviterNotFound:4504,upgradeClient:4505,unknownRequest:4506,concurrencyPrevented:4507,sessionNotFound:4508},Qe="mainnet",jn=5*60;class Nn{constructor(){c(this,"connected",!1);c(this,"showSplash",!0);c(this,"hideWelcome",!0);c(this,"welcomeTab",0);c(this,"activePage","tap");c(this,"points");c(this,"pointsTrans");c(this,"levels",[]);c(this,"level");c(this,"levelEnergy",0);c(this,"remainEnergy",0);c(this,"levelUp",!1);c(this,"levelUpStoryShared",!1);c(this,"friendsFetchState","none");c(this,"friends",{count:0,top:[]});c(this,"tasksFetchState","none");c(this,"tasks",{groups:[]});c(this,"shownTask");c(this,"hasUndoneTasks",!1);c(this,"shownDailyStreak",!1);c(this,"shownLevel",1);c(this,"leadersFetchStates",[]);c(this,"leaders",[]);c(this,"currentWallet",{rawAddress:"",connectedWalletsCount:0,htonWalletActivated:!1,htonHoldLastDay:0,connectWalletPoints:0,htonActivationPoints:0,htonHoldPoints:0});c(this,"tonConnectOpened",!1);c(this,"shownConnectedWallet",!1);c(this,"shownConfirmDisconnect",!1);c(this,"messages",[]);c(this,"errorPage");c(this,"walletApp","");c(this,"amount","");c(this,"signedAmount",0n);c(this,"tonClient");c(this,"tonBalance");c(this,"htonTreasuryState");c(this,"htonAddress");c(this,"htonWalletState");c(this,"ongoingRequests",0);c(this,"transactionState","none");c(this,"conn");c(this,"tonConnectUI");c(this,"proof");c(this,"bufferedTaps",0);c(this,"plusEffectEl");c(this,"confetti");c(this,"confettiEnd",0);c(this,"lastBlock",0);c(this,"timeoutConnect");c(this,"timeoutReplenish");c(this,"timeoutFlushTaps");c(this,"timeoutPing");c(this,"timeoutInitTonAccess");c(this,"timeoutReadLastBlock");c(this,"activateSplash",()=>{Telegram.WebApp.setHeaderColor("#0E0E0E"),Telegram.WebApp.setBackgroundColor("#0E0E0E"),Telegram.WebApp.MainButton.color="#7E22CE",Telegram.WebApp.BackButton.onClick(this.handleBack),Telegram.WebApp.expand(),Telegram.WebApp.ready(),setTimeout(()=>{this.init()},bn),setTimeout(()=>{this.setShowSplash(!1)},wn)});c(this,"connect",()=>{var n;if((((n=Telegram.WebApp.initDataUnsafe.user)==null?void 0:n.id)??0)<=1){this.showErrorPage("upgrade");return}let t="wss://api.hipogang.io/ws";location.host!=="app.hipogang.io"&&(t=location.origin.replace(/^http/,"ws")+location.pathname+"ws"),this.conn=new WebSocket(t+"?"+Telegram.WebApp.initData),this.conn.onerror=this.onConnError,this.conn.onopen=this.onConnOpen,this.conn.onclose=this.onConnClose,this.conn.onmessage=this.onConnMessage});c(this,"disconnect",()=>{this.conn.close(),this.setConnected(!1),clearTimeout(this.timeoutConnect),this.timeoutConnect=setTimeout(this.connect,Be),Be=Math.min(Be*2,xn)});c(this,"onConnOpen",()=>{this.setConnected(!0),this.activePage==="tap"?(this.sendTap(0),this.sendLevels()):this.activePage==="friends"&&this.sendFriends(),this.sendTasks(),this.proof!=null?this.sendConnectWallet():this.sendCurrentWallet(),Be=1,clearTimeout(this.timeoutReplenish),this.timeoutReplenish=setTimeout(this.replenish,Ke),clearTimeout(this.timeoutPing),this.timeoutPing=setTimeout(this.sendPing,bt)});c(this,"onConnClose",t=>{this.connected&&this.disconnect(),clearTimeout(this.timeoutReplenish),clearTimeout(this.timeoutPing),this.friendsFetchState==="load"&&(this.friendsFetchState="error"),this.tasksFetchState==="load"&&(this.tasksFetchState="error"),t.code===je.accountBlocked?(clearTimeout(this.timeoutConnect),this.showErrorPage("blocked")):t.code===je.invalidInviteLink||t.code===je.invitationBlocked||t.code===je.inviterNotFound?(clearTimeout(this.timeoutConnect),this.showErrorPage("no-invitation")):t.code===je.upgradeClient&&(clearTimeout(this.timeoutConnect),location.reload())});c(this,"onConnError",()=>{this.disconnect()});c(this,"onConnMessage",t=>{var a,o,d,g;if(typeof t.data!="string")return;const n=JSON.parse(t.data);switch(n.type){case"tap":{this.setStatus(n.body);break}case"levels":{this.setLevels(n.body);break}case"friends":{this.setFriends("done",n.body);break}case"tasks":{this.setTasks("done",n.body);break}case"claimtask":case"claimdailystreak":case"claiminvitefriends":case"claimlevelupstory":{if(n.body.points?this.showTaskSuccess(n.body.points):this.showTaskFailure(),n.body.points&&this.activePage==="tap"&&this.sendTap(0),this.setTasks("done",n.body.tasks),this.shownTask!=null){let x;this.tasks.groups.forEach(S=>{const h=S.tasks.find(w=>{var P;return w.id===((P=this.shownTask)==null?void 0:P.id)});x==null&&h&&(x=h)}),x!=null?this.showTask(x):this.showTask(void 0)}n.type==="claimlevelupstory"&&(this.setLevelUpStoryShared(!1),this.levelUp&&this.hideLevelUp()),n.type==="claimdailystreak"&&n.body.points&&(((a=this.tasks.dailyStreak)==null?void 0:a.count)??0)>=(((o=this.tasks.dailyStreak)==null?void 0:o.pointsPerDay.length)??1)&&this.confettiStart();break}case"claimhtonwalletactivated":{n.body.points?(this.showMessage({type:"success",time:Date.now(),text:`You got ${n.body.points.toLocaleString()} coins`}),this.confettiStart(5*1e3),this.setCurrentWallet({rawAddress:this.currentWallet.rawAddress,connectedWalletsCount:this.currentWallet.connectedWalletsCount,htonWalletActivated:!0,htonHoldLastDay:this.currentWallet.htonHoldLastDay,connectWalletPoints:this.currentWallet.connectWalletPoints,htonActivationPoints:this.currentWallet.htonActivationPoints,htonHoldPoints:this.currentWallet.htonHoldPoints})):n.body.accepted||(n.body.reason==="NO_CURRENT_WALLET"?this.showMessage({type:"failure",time:Date.now(),text:"Your wallet is not connected"}):n.body.reason==="ALREADY_ACTIVATED"?this.showMessage({type:"failure",time:Date.now(),text:"You have already claimed your points"}):n.body.reason==="UNABLE_TO_CHECK"?this.showMessage({type:"failure",time:Date.now(),text:"Unable to check, please try again later"}):n.body.reason==="HTON_WALLET_NOT_FOUND"?this.showMessage({type:"failure",time:Date.now(),text:"Your hTON wallet is not found, try again in a few moments"}):n.body.reason==="INSUFFICIENT_FUNDS"?this.showMessage({type:"failure",time:Date.now(),text:"Not enough hTON in your wallet"}):this.showMessage({type:"failure",time:Date.now(),text:"Claim not accepted"})),this.sendCurrentWallet();break}case"leaders":{this.setLeaders("done",n.body);break}case"generateproofpayload":{(d=this.tonConnectUI)==null||d.setConnectRequestParameters({state:"ready",value:{tonProof:n.body.payload}});break}case"connectwallet":{n.body.points?(this.showMessage({type:"success",time:Date.now(),text:`You got ${n.body.points.toLocaleString()} coins`}),this.confettiStart()):n.body.accepted||((g=this.tonConnectUI)==null||g.disconnect(),this.setCurrentWallet({rawAddress:"",connectedWalletsCount:this.currentWallet.connectedWalletsCount,htonWalletActivated:this.currentWallet.htonWalletActivated,htonHoldLastDay:this.currentWallet.htonHoldLastDay,connectWalletPoints:this.currentWallet.connectWalletPoints,htonActivationPoints:this.currentWallet.htonActivationPoints,htonHoldPoints:this.currentWallet.htonHoldPoints}),n.body.reason==="INVALID_PAYLOAD"?this.showMessage({type:"failure",time:Date.now(),text:"Too late to connect wallet, please try again"}):n.body.reason==="INVALID_ADDRESS"?this.showMessage({type:"failure",time:Date.now(),text:"Invalid workchain or wallet address"}):n.body.reason==="UNKNOWN_WALLET"?this.showMessage({type:"failure",time:Date.now(),text:"Unknown wallet connected, use a [v1-v5] standard wallet"}):n.body.reason==="INVALID_SIGNATURE"?this.showMessage({type:"failure",time:Date.now(),text:"Signature is invalid"}):n.body.reason==="TOO_MANY_CONNECTED_WALLETS"?this.showMessage({type:"failure",time:Date.now(),text:"You have too many connected wallets, new wallets are not accepted"}):this.showMessage({type:"failure",time:Date.now(),text:"Wallet not accepted"})),this.proof=void 0,this.sendCurrentWallet();break}case"currentwallet":{this.setCurrentWallet({rawAddress:this.currentWallet.rawAddress,connectedWalletsCount:n.body.connected_wallets_count,htonWalletActivated:n.body.hton_wallet_activated,htonHoldLastDay:n.body.hton_hold_last_day,connectWalletPoints:n.body.connect_wallet_points,htonActivationPoints:n.body.hton_activation_points,htonHoldPoints:n.body.hton_hold_points});break}}});c(this,"sendPing",()=>{this.connected&&(this.conn.send(JSON.stringify({type:"ping",v:V})),clearTimeout(this.timeoutPing),this.timeoutPing=setTimeout(this.sendPing,bt))});c(this,"sendTap",t=>{this.connected&&this.conn.send(JSON.stringify({type:"tap",body:{count:t},v:V}))});c(this,"sendLevels",()=>{!this.connected||this.levels.length>0||this.conn.send(JSON.stringify({type:"levels",v:V}))});c(this,"sendFriends",()=>{if(!this.connected){this.friendsFetchState="error";return}this.friendsFetchState="load",this.conn.send(JSON.stringify({type:"friends",v:V}))});c(this,"sendTasks",()=>{if(!this.connected){this.tasksFetchState="error";return}this.tasksFetchState="load",this.conn.send(JSON.stringify({type:"tasks",v:V}))});c(this,"sendLeaders",()=>{if(!this.connected){this.leadersFetchStates[this.shownLevel-1]="error";return}this.leadersFetchStates[this.shownLevel-1]!=="load"&&(this.leadersFetchStates[this.shownLevel-1]="load",this.conn.send(JSON.stringify({type:"leaders",body:{level:this.shownLevel},v:V})))});c(this,"sendOpenTask",t=>{this.connected&&this.conn.send(JSON.stringify({type:"opentask",body:{id:t},v:V}))});c(this,"sendClaimTask",t=>{this.connected&&this.conn.send(JSON.stringify({type:"claimtask",body:{id:t},v:V}))});c(this,"sendClaimInviteFriends",()=>{this.connected&&this.conn.send(JSON.stringify({type:"claiminvitefriends",v:V}))});c(this,"sendClaimDailyStreak",t=>{this.connected&&this.conn.send(JSON.stringify({type:"claimdailystreak",body:{timezone_offset:t},v:V}))});c(this,"sendClaimLevelUpStory",()=>{this.connected&&this.conn.send(JSON.stringify({type:"claimlevelupstory",v:V}))});c(this,"sendClaimHtonWalletActivated",()=>{this.connected&&this.conn.send(JSON.stringify({type:"claimhtonwalletactivated",v:V}))});c(this,"sendCurrentWallet",()=>{this.connected&&this.conn.send(JSON.stringify({type:"currentwallet",v:V}))});c(this,"sendConnectWallet",()=>{!this.connected||this.proof==null||this.conn.send(JSON.stringify({type:"connectwallet",body:{raw_address:this.proof.rawAddress,wallet_state_init:this.proof.walletStateInit,domain:this.proof.domain,payload:this.proof.payload,signature:this.proof.signature,timestamp:this.proof.timestamp},v:V}))});c(this,"sendGenerateProofPayload",()=>{this.connected&&this.conn.send(JSON.stringify({type:"generateproofpayload",v:V}))});c(this,"setConnected",t=>{this.connected=t});c(this,"setShowSplash",t=>{this.showSplash=t});c(this,"closeWelcome",()=>{this.setHideWelcome(!0),this.setWelcomeTab(0),this.updateBack(),localStorage.setItem("hideWelcome","1"),Telegram.WebApp.CloudStorage.setItem("hideWelcome","1")});c(this,"setHideWelcome",t=>{this.hideWelcome=t});c(this,"setWelcomeTab",t=>{this.welcomeTab=t,this.updateBack()});c(this,"setActivePage",t=>{this.activePage!=="tap"&&t==="tap"?(this.sendTap(0),this.sendLevels()):this.activePage!=="friends"&&t==="friends"?this.sendFriends():this.activePage!=="tasks"&&t==="tasks"?this.sendTasks():this.activePage!=="airdrop"&&t==="airdrop"&&(this.sendCurrentWallet(),this.initTonConnect(),this.initTonAccess()),this.activePage=t,this.updateBack(),Telegram.WebApp.HapticFeedback.impactOccurred("medium")});c(this,"updateBack",()=>{this.shownDailyStreak||this.shownTask!=null||this.levelUp||this.tonConnectOpened||this.shownConnectedWallet||this.transactionState!="none"||this.welcomeTab>0||this.activePage!=="tap"?Telegram.WebApp.BackButton.show():Telegram.WebApp.BackButton.hide(),this.shownDailyStreak||this.shownTask!=null||this.levelUp||this.tonConnectOpened||this.shownConnectedWallet||this.transactionState!="none"||!this.hideWelcome?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden"),this.activePage==="tap"?Telegram.WebApp.isVerticalSwipesEnabled&&Telegram.WebApp.disableVerticalSwipes():Telegram.WebApp.isVerticalSwipesEnabled||Telegram.WebApp.enableVerticalSwipes()});c(this,"handleBack",()=>{var t;this.shownDailyStreak?this.showDailyStreak(!1):this.shownTask!=null?this.showTask(void 0):this.levelUp?this.hideLevelUp():this.tonConnectOpened?(t=this.tonConnectUI)==null||t.closeModal():this.shownConfirmDisconnect?this.confirmDisconnect(!1):this.shownConnectedWallet?this.showConnectedWallet(!1):this.transactionState!=="none"?(this.transactionState==="timeout"||this.transactionState==="done")&&this.setTransactionState("none"):this.welcomeTab>0?this.setWelcomeTab(this.welcomeTab-1):this.activePage==="staketon"?this.setActivePage("airdrop"):this.activePage!=="tap"?this.setActivePage("tap"):(console.warn("back button not handled correctly"),this.updateBack())});c(this,"setPoints",t=>{(this.points==null||this.points<t)&&(this.points=t),this.pointsTrans==null&&(this.pointsTrans=0),requestAnimationFrame(this.animatePoints)});c(this,"setPointsTrans",t=>{this.pointsTrans=t});c(this,"animatePoints",()=>{if(this.points==null||this.pointsTrans==null)return;const t=this.points-this.pointsTrans;t!==0&&(this.pointsTrans=Math.min(this.points,this.pointsTrans+Math.ceil(t/10)),requestAnimationFrame(this.animatePoints))});c(this,"setStatus",t=>{this.setPoints(t.points),this.setLevel(t.level),this.levelEnergy=t.level_energy,this.remainEnergy=t.remain_energy,t.level_up&&(this.levelUp=!0,this.setLevelUpStoryShared(!1),Telegram.WebApp.HapticFeedback.impactOccurred("rigid"),this.updateBack()),this.setShowSplash(!1);const n=t.points.toString();localStorage.setItem("level",t.level.toString()),localStorage.setItem("points",n),Telegram.WebApp.CloudStorage.setItem("points",n)});c(this,"setLevel",t=>{this.level=t});c(this,"setLevels",t=>{this.levels=t.levels});c(this,"setFriends",(t,n)=>{this.friendsFetchState=t,this.friends=n});c(this,"setTasks",(t,n)=>{if(n.tasks.length!==n.states.length){this.tasksFetchState="error";return}this.tasksFetchState=t;const a={};let o=0;n.groups.forEach(h=>{const w={id:h[0],title:h[1],weight:h[2],tasks:[]};a[w.id]=w}),n.tasks.forEach((h,w)=>{var $;const P={id:h[0],points:h[1],groupId:h[2],icon:h[3],title:h[4],subtitle:h[5],action:h[6],url:h[7],weight:h[8],state:n.states[w]},L=h[9];L!=null&&(P.story={caption:L[1],useInviteLink:L[2],widgetName:L[3],media:L[4]}),($=a[P.groupId])==null||$.tasks.push(P),o=Math.max(o,parseInt(P.id,10))});const d=[];Object.values(a).forEach(h=>{h!=null&&(h.tasks.length>0||h.id==="daily")&&(h.tasks.sort((w,P)=>w.state===2&&P.state<2?1:w.state<2&&P.state===2?-1:w.weight-P.weight),d.push(h))});const g={level:n.invite_friends[0],points:n.invite_friends[1]},x={level:n.level_up_story[0],points:n.level_up_story[1]};this.tasks={groups:d.sort((h,w)=>h.weight-w.weight),dailyStreak:{lastDay:n.daily_streak[0],count:n.daily_streak[1],pointsPerDay:n.daily_streak[2]},inviteFriends:g,levelUpStory:x};const S=this.tasks.groups.reduce((h,w)=>w.tasks.reduce((P,L)=>P||L.state!==2,h),!1);this.setHasUndoneTasks(S)});c(this,"setLeaders",(t,n)=>{this.leadersFetchStates[n.level-1]=t,this.leaders[n.level-1]=n.top});c(this,"tap",(t,n)=>{var x;const a=this.level??1;if(!this.connected||this.remainEnergy<a)return;const o=this.points??0;this.setPoints((this.points??0)+a);const d=this.points??0;this.remainEnergy=this.remainEnergy-a,this.bufferedTaps+=a,Telegram.WebApp.isClosingConfirmationEnabled||Telegram.WebApp.enableClosingConfirmation(),clearTimeout(this.timeoutReplenish),clearTimeout(this.timeoutFlushTaps);const g=((x=this.levels[this.level??1])==null?void 0:x.min_points)??0;if(o<g&&d>=g||this.bufferedTaps>=this.levelEnergy?this.flushTaps():this.timeoutFlushTaps=setTimeout(this.flushTaps,xt),Telegram.WebApp.HapticFeedback.impactOccurred("light"),this.plusEffectEl!=null){const S=this.plusEffectEl.cloneNode();S.innerText="+"+a.toString(),S.style.left=t.toString()+"px",S.style.top=n.toString()+"px",document.body.appendChild(S),setTimeout(()=>{S.style.opacity="0",S.style.top=(n-100).toString()+"px"},0),setTimeout(()=>{S.remove()},700)}});c(this,"flushTaps",()=>{if(!this.connected){clearTimeout(this.timeoutFlushTaps),this.timeoutFlushTaps=setTimeout(this.flushTaps,xt);return}this.bufferedTaps>0&&(this.sendTap(this.bufferedTaps),this.bufferedTaps=0),this.timeoutReplenish=setTimeout(this.replenish,Ke),Telegram.WebApp.isClosingConfirmationEnabled&&Telegram.WebApp.disableClosingConfirmation()});c(this,"replenish",()=>{this.remainEnergy=Math.min(this.levelEnergy,this.remainEnergy+3),clearTimeout(this.timeoutReplenish),this.timeoutReplenish=setTimeout(this.replenish,Ke)});c(this,"shareLevelUpStory",()=>{var a;let t="Earn $HPO airdrops with me on TON!",n;((a=Telegram.WebApp.initDataUnsafe.user)==null?void 0:a.is_premium)??!1?n={url:this.inviteLink,name:"Join Hipo Gang!"}:t+=`
`+this.inviteLink,Telegram.WebApp.shareToStory("https://media.hipogang.io/levelup/"+(this.level??2).toString()+".mp4",{text:t,widget_link:n}),this.setLevelUpStoryShared(!0)});c(this,"shareTaskStory",()=>{var o;const t=this.shownTask;if((t==null?void 0:t.story)==null||!this.connected)return;let n=t.story.caption,a;(t.story.useInviteLink||t.url!="")&&(((o=Telegram.WebApp.initDataUnsafe.user)==null?void 0:o.is_premium)??!1?a={url:t.story.useInviteLink?this.inviteLink:t.url,name:t.story.widgetName}:n+=`
`+(t.story.useInviteLink?this.inviteLink:t.url)),Telegram.WebApp.shareToStory(t.story.media,{text:n,widget_link:a}),this.taskOpened(t)});c(this,"setLevelUpStoryShared",t=>{this.levelUpStoryShared=t});c(this,"hideLevelUp",()=>{this.levelUp=!1,this.updateBack()});c(this,"showTask",t=>{this.shownTask=t,this.updateBack()});c(this,"showDailyStreak",t=>{this.shownDailyStreak=t,t&&setTimeout(()=>{var n;if((((n=this.tasks.dailyStreak)==null?void 0:n.count)??0)>3){const a=document.querySelector("#daily-streak");a!=null&&(a.scrollTop=a.scrollHeight)}},1),this.updateBack()});c(this,"showLevelUpStory",()=>{var t;this.showTask({id:"levelupstory",points:((t=this.tasks.levelUpStory)==null?void 0:t.points)??0,groupId:"simple",icon:"levelupstory.png",title:"Post Your Level Up Story",subtitle:"",action:"",url:"",weight:0,state:this.isLevelUpStoryDone?2:1})});c(this,"show1mMembersStory",()=>{if(this.tasks.groups.length<1||this.tasks.groups[0].tasks.length<1)return;const t=this.tasks.groups[0].tasks[0];t.story!=null&&this.showTask(t)});c(this,"taskOpened",t=>{!this.connected||t==null||(this.sendOpenTask(t.id),t.state=Math.max(t.state,1))});c(this,"taskClaimed",t=>{!this.connected||t==null||(t.id==="invitefriends"?this.sendClaimInviteFriends():this.sendClaimTask(t.id),t.state=0)});c(this,"claimDailyStreak",()=>{if(!this.connected||this.tasks.dailyStreak==null)return;const t=new Date().getTimezoneOffset();this.sendClaimDailyStreak(t),this.tasks.dailyStreak.lastDay=Math.floor(Date.now()/1e3)});c(this,"claimLevelUpStory",()=>{if(this.connected){if(!this.levelUpStoryShared){this.showTaskFailure();return}this.sendClaimLevelUpStory()}});c(this,"claimHtonWalletActivated",()=>{!this.connected||this.htonWalletState==null||this.currentWallet.htonWalletActivated||this.sendClaimHtonWalletActivated()});c(this,"showTaskSuccess",t=>{this.showMessage({type:"success",time:Date.now(),text:`You got ${t.toLocaleString()} coins`})});c(this,"showTaskFailure",()=>{this.showMessage({type:"failure",time:Date.now(),text:"Task not accepted"})});c(this,"showMessage",t=>{this.messages.push(t),setTimeout(()=>{const n=document.querySelector("#messageDisplay #m"+t.time.toString());n!=null&&(n.classList.remove("max-h-0"),n.classList.add("max-h-16"))},10),setTimeout(()=>{const n=document.querySelector("#messageDisplay #m"+t.time.toString());n!=null&&(n.classList.remove("max-h-16"),n.classList.add("max-h-0"))},wt-1e3),setTimeout(this.removeFirstMessage,wt),Telegram.WebApp.HapticFeedback.impactOccurred("medium")});c(this,"removeFirstMessage",()=>{this.messages.splice(0,1)});c(this,"setHasUndoneTasks",t=>{this.hasUndoneTasks=t});c(this,"showLevel",t=>{this.shownLevel=Math.max(1,Math.min(t,this.levels.length)),this.sendLeaders(),this.setActivePage("levels")});c(this,"showErrorPage",t=>{this.errorPage=t});c(this,"setCurrentWallet",t=>{this.currentWallet=t});c(this,"setTonConnectOpened",t=>{this.tonConnectOpened=t});c(this,"showConnectedWallet",t=>{this.shownConnectedWallet=t,this.updateBack()});c(this,"confirmDisconnect",t=>{this.shownConfirmDisconnect=t});c(this,"setWalletApp",t=>{this.walletApp=t});c(this,"setAmount",t=>{this.amount=t});c(this,"setAmountToMax",()=>{this.amount=_.fromNano(this.maxAmount)});c(this,"setSignedAmount",t=>{this.signedAmount=t});c(this,"setTonClient",t=>{this.tonClient=new _.TonClient4({endpoint:t,timeout:5*1e3}),this.readLastBlock()});c(this,"beginRequest",()=>{this.ongoingRequests+=1});c(this,"endRequest",()=>{this.ongoingRequests-=1});c(this,"setTransactionState",t=>{this.transactionState=t});c(this,"readLastBlock",async()=>{var o;const t=this.tonClient,n=mt.get(Qe);let a;try{a=_.Address.parseRaw(this.currentWallet.rawAddress)}catch{a=void 0}if(t==null||n==null){ht(()=>{this.tonBalance=void 0,this.htonTreasuryState=void 0,this.htonAddress=void 0,this.htonWalletState=void 0});return}try{this.beginRequest();const d=(await Se(()=>t.getLastBlock())).last.seqno;if(d<this.lastBlock)throw new Error("older block");const g=t.openAt(d,Xe.createFromAddress(n)),x=Se(g.getTreasuryState),S=a==null?Promise.resolve(void 0):Se(()=>t.getAccountLite(d,a).then(J=>BigInt(J.account.balance.coins))),h=(o=this.htonTreasuryState)==null?void 0:o.parent,w=a==null||h==null?Promise.resolve(void 0):(this.htonAddress!=null?Promise.resolve(this.htonAddress):Se(()=>t.openAt(d,Fe.createFromAddress(h)).getWalletAddress(a))).then(async J=>{const y=await t.openAt(d,Le.createFromAddress(J)).getWalletState().catch(A=>{if(!(A instanceof Error&&"message"in A&&A.message==="Exit code: -256"))throw A});return[J,y]}),P=[x,S,w],[L,$,ee]=await Promise.all(P);let[ne,te]=ee??[];if(ne==null&&a!=null&&L.parent!=null){const J=t.openAt(d,Fe.createFromAddress(L.parent));[ne,te]=await Se(()=>J.getWalletAddress(a)).then(async m=>{const A=await t.openAt(d,Le.createFromAddress(m)).getWalletState().catch(j=>{if(!(j instanceof Error&&"message"in j&&j.message==="Exit code: -256"))throw j});return[m,A]})}ht(()=>{this.tonBalance=$,this.htonTreasuryState=L,this.htonAddress=ne,this.htonWalletState=te,this.lastBlock=d}),clearTimeout(this.timeoutReadLastBlock),this.timeoutReadLastBlock=setTimeout(()=>void this.readLastBlock(),Cn)}catch{clearTimeout(this.timeoutReadLastBlock),this.timeoutReadLastBlock=setTimeout(()=>void this.readLastBlock(),An)}finally{this.endRequest()}});c(this,"send",()=>{var d,g;const t=mt.get(Qe),n=this.tonBalance,a=(g=(d=this.tonConnectUI)==null?void 0:d.account)==null?void 0:g.address,o=this.amountInNano;t!=null&&n!=null&&a===this.currentWallet.rawAddress&&o!=null&&this.tonConnectUI!=null&&this.isAmountPositive&&this.isAmountValid&&(this.setSignedAmount(o),this.setTransactionState("sign"),this.tonConnectUI.sendTransaction({validUntil:Math.floor(Date.now()/1e3)+jn,network:pt.MAINNET,from:this.currentWallet.rawAddress,messages:[Ls(t,o)]}).then(()=>(this.setTransactionState("wait"),this.updateTransactionState(n))).then(()=>{this.setAmount("")}).catch(()=>{this.setTransactionState("none")}))});c(this,"updateTransactionState",async(t,n=0)=>{if(await Wn(kn),this.readLastBlock(),this.tonBalance!==t){this.setTransactionState("done");return}if(n>100){this.setTransactionState("timeout");return}return this.updateTransactionState(t,n+1)});c(this,"close",()=>{Telegram.WebApp.close()});c(this,"controlBackgroundJobs",()=>{document.hidden?(this.flushTaps(),this.disconnect(),clearTimeout(this.timeoutFlushTaps),clearTimeout(this.timeoutReplenish),clearTimeout(this.timeoutConnect),clearTimeout(this.timeoutPing)):this.connect()});c(this,"initTonAccess",()=>{this.tonClient==null&&(clearTimeout(this.timeoutInitTonAccess),_t({network:Qe}).then(this.setTonClient).catch(()=>{this.timeoutInitTonAccess=setTimeout(this.initTonAccess,yn)}))});c(this,"initTonConnect",()=>{this.tonConnectUI==null&&(this.tonConnectUI=new gs({manifestUrl:"https://app.hipo.finance/tonconnect-manifest.json",restoreConnection:!0,actionsConfiguration:{modals:[],notifications:[]},uiPreferences:{theme:ft.DARK,colorsSet:{[ft.DARK]:{background:{primary:"#1C1C1C",secondary:"#7E22CE",qr:"#ffffff",tint:"#7E22CE",segment:"#464343"},text:{primary:"#ffffff",secondary:"#cccccc"},icon:{primary:"#ffffff",secondary:"#cccccc",tertiary:"#cccccc",success:"#4bb543",error:"#c00"},constant:{black:"#1C1C1C",white:"#1C1C1C"},accent:"#7E22CE"}}}}),this.tonConnectUI.onStatusChange(t=>{var n,a;if(t==null){this.proof=void 0;return}if(t.account.chain!==pt.MAINNET){(n=this.tonConnectUI)==null||n.disconnect(),this.showMessage({type:"failure",time:Date.now(),text:"Wallet must be on mainnet"});return}if(((a=t.connectItems)==null?void 0:a.tonProof)!=null&&!("error"in t.connectItems.tonProof)){const o=t.connectItems.tonProof;this.proof={rawAddress:t.account.address,walletStateInit:t.account.walletStateInit,domain:o.proof.domain.value,payload:o.proof.payload,signature:o.proof.signature,timestamp:o.proof.timestamp},this.sendConnectWallet()}this.setCurrentWallet({rawAddress:t.account.address,connectedWalletsCount:this.currentWallet.connectedWalletsCount,htonWalletActivated:this.currentWallet.htonWalletActivated,htonHoldLastDay:this.currentWallet.htonHoldLastDay,connectWalletPoints:this.currentWallet.connectWalletPoints,htonActivationPoints:this.currentWallet.htonActivationPoints,htonHoldPoints:this.currentWallet.htonHoldPoints}),this.setWalletApp(t.name),this.readLastBlock()}),this.tonConnectUI.onModalStateChange(t=>{setTimeout(()=>{t.status==="opened"?this.setTonConnectOpened(!0):this.setTonConnectOpened(!1)}),this.updateBack()}))});c(this,"connectWallet",()=>{this.initTonConnect(),!(!this.connected||this.tonConnectUI==null)&&(this.sendGenerateProofPayload(),this.tonConnectUI.disconnect(),this.tonConnectUI.setConnectRequestParameters({state:"loading"}),this.tonConnectUI.openModal())});c(this,"disconnectWallet",()=>{var t;(t=this.tonConnectUI)==null||t.disconnect(),this.confirmDisconnect(!1),this.showConnectedWallet(!1),this.setCurrentWallet({rawAddress:"",connectedWalletsCount:this.currentWallet.connectedWalletsCount,htonWalletActivated:this.currentWallet.htonWalletActivated,htonHoldLastDay:this.currentWallet.htonHoldLastDay,connectWalletPoints:this.currentWallet.connectWalletPoints,htonActivationPoints:this.currentWallet.htonActivationPoints,htonHoldPoints:this.currentWallet.htonHoldPoints}),this.tonBalance=void 0,this.htonTreasuryState=void 0,this.htonAddress=void 0,this.htonWalletState=void 0});c(this,"copyWalletAddress",()=>{this.friendlyWalletAddress.length!==0&&(navigator.clipboard.writeText(this.friendlyWalletAddress),Telegram.WebApp.HapticFeedback.impactOccurred("heavy"))});c(this,"copyInviteLink",()=>{navigator.clipboard.writeText(this.inviteLink),Telegram.WebApp.HapticFeedback.impactOccurred("heavy")});c(this,"confettiStart",(t=2e3)=>{this.confettiEnd=Date.now()+t,this.confettiFrame()});c(this,"confettiFrame",()=>{if(this.confetti==null)return;const t=We.length,n=[We[Math.floor(Math.random()*t)],We[Math.floor(Math.random()*t)]],a=[We[Math.floor(Math.random()*t)],We[Math.floor(Math.random()*t)]];this.confetti({particleCount:2,angle:60,spread:55,origin:{x:0},colors:n,gravity:2,ticks:300}),this.confetti({particleCount:2,angle:120,spread:55,origin:{x:1},colors:a,gravity:2,ticks:300}),Date.now()<this.confettiEnd&&requestAnimationFrame(this.confettiFrame)});hs(this,{connected:N,showSplash:N,hideWelcome:N,welcomeTab:N,activePage:N,points:N,pointsTrans:N,levels:N,level:N,levelEnergy:N,remainEnergy:N,levelUp:N,levelUpStoryShared:N,friendsFetchState:N,friends:N,tasksFetchState:N,tasks:N,shownTask:N,hasUndoneTasks:N,shownDailyStreak:N,shownLevel:N,leadersFetchStates:N,leaders:N,currentWallet:N,tonConnectOpened:N,shownConnectedWallet:N,shownConfirmDisconnect:N,messages:N,errorPage:N,walletApp:N,amount:N,signedAmount:N,tonClient:N,tonBalance:N,htonTreasuryState:N,htonAddress:N,htonWalletState:N,ongoingRequests:N,transactionState:N,pointsTransFormatted:E,levelProgress:E,levelEnergyFormatted:E,remainEnergyFormatted:E,firstName:E,username:E,inviteLink:E,inviteHref:E,currentDailyStreakPoints:E,isDailyStreakDone:E,isLevelUpStoryDone:E,showInviteFriendsTask:E,currentInviteFriendsCount:E,currentInviteFriendsPoints:E,canShareStory:E,truncatedWalletAddress:E,showDailyStreakShortcut:E,showPostStoryShortcut:E,maxAmount:E,maxAmountFormatted:E,signedAmountFormatted:E,amountInNano:E,isAmountValid:E,isAmountPositive:E,youWillReceive:E,exchangeRate:E,exchangeRateFormatted:E,transactionCostFormatted:E,isWalletConnected:E,hasHtonWallet:E,tonBalanceFormatted:E,htonBalanceFormatted:E,setConnected:b,setShowSplash:b,closeWelcome:b,setHideWelcome:b,setWelcomeTab:b,setActivePage:b,updateBack:b,handleBack:b,setPoints:b,setPointsTrans:b,animatePoints:b,setStatus:b,setLevel:b,setLevels:b,setFriends:b,sendFriends:b,setTasks:b,setLeaders:b,sendTasks:b,tap:b,replenish:b,setLevelUpStoryShared:b,hideLevelUp:b,showTask:b,showDailyStreak:b,showLevelUpStory:b,show1mMembersStory:b,taskOpened:b,taskClaimed:b,claimDailyStreak:b,claimLevelUpStory:b,claimHtonWalletActivated:b,showTaskSuccess:b,showTaskFailure:b,removeFirstMessage:b,setHasUndoneTasks:b,showLevel:b,showErrorPage:b,setCurrentWallet:b,setTonConnectOpened:b,showConnectedWallet:b,confirmDisconnect:b,setWalletApp:b,setAmount:b,setAmountToMax:b,setSignedAmount:b,setTonClient:b,beginRequest:b,endRequest:b,setTransactionState:b,disconnectWallet:b})}init(){this.plusEffectEl=document.querySelector("#plusEffect")??void 0,this.plusEffectEl!=null&&(this.plusEffectEl.classList.remove("hidden"),this.plusEffectEl.remove()),localStorage.getItem("hideWelcome")==null&&(Telegram.WebApp.isVersionAtLeast("6.9")?Telegram.WebApp.CloudStorage.getItem("hideWelcome",(o,d)=>{o!=null||d!==""||this.setHideWelcome(!1)}):this.setHideWelcome(!1));const t=localStorage.getItem("level");t!=null&&this.level==null&&this.setLevel(parseInt(t,10)||1);const n=localStorage.getItem("points");if(n!=null&&this.pointsTrans==null){const o=parseInt(n,10);o&&this.setPointsTrans(o)}Telegram.WebApp.isVersionAtLeast("6.9")&&Telegram.WebApp.CloudStorage.getItem("points",(o,d)=>{if(o!=null||this.points!=null)return;const g=parseInt(d,10);if(g){this.setPointsTrans(Math.max(g,this.pointsTrans??0));return}}),this.updateBack(),document.onvisibilitychange=this.controlBackgroundJobs,this.controlBackgroundJobs();const a=document.querySelector("#confetti");a!=null&&"getContext"in a&&typeof a.getContext=="function"&&a.getContext("2d")!=null&&(this.confetti=ps.create(a,{resize:!0,useWorker:!1,disableForReducedMotion:!1}))}get pointsTransFormatted(){return this.pointsTrans!=null?this.pointsTrans.toLocaleString():"···"}get levelProgress(){var o;const t=this.level,n=this.levels,a=this.points;if(t!=null&&n.length>=t&&a!=null){const d=n[t-1].min_points,g=((o=n[t])==null?void 0:o.min_points)??0;if(g-d>0)return Math.max(0,Math.min(100*(a-d)/(g-d),100))}}get levelEnergyFormatted(){return this.levelEnergy.toLocaleString()}get remainEnergyFormatted(){return this.remainEnergy.toLocaleString()}get firstName(){var t;return((t=Telegram.WebApp.initDataUnsafe.user)==null?void 0:t.first_name)??""}get username(){var t;return((t=Telegram.WebApp.initDataUnsafe.user)==null?void 0:t.username)??""}get inviteLink(){var t;return Tn+(((t=Telegram.WebApp.initDataUnsafe.user)==null?void 0:t.id)??0).toString()}get inviteHref(){const t=encodeURIComponent(this.inviteLink),n=encodeURIComponent(["","Earn $HPO Airdrops with me in the First DeFi Tap-to-Earn Game on TON!","","💸 5k coins as a first-time gift","🔥 25k coins if you have Telegram Premium"].join(`
`));return`https://t.me/share/url?url=${t}&text=${n}`}get currentDailyStreakPoints(){var a,o;const t=((a=this.tasks.dailyStreak)==null?void 0:a.pointsPerDay)??[0];let n=((o=this.tasks.dailyStreak)==null?void 0:o.count)??0;return this.isDailyStreakDone||(n+=1),t[Math.min(Math.max(1,n),t.length)-1]}get isDailyStreakDone(){var n;return Math.floor(Date.now()/1e3)<(((n=this.tasks.dailyStreak)==null?void 0:n.lastDay)??0)+24*60*60}get isLevelUpStoryDone(){var t;return(((t=this.tasks.levelUpStory)==null?void 0:t.level)??1)>=(this.level??1)}get showInviteFriendsTask(){var t,n;return(((t=this.tasks.inviteFriends)==null?void 0:t.level)??0)<(((n=this.tasks.inviteFriends)==null?void 0:n.points.length)??0)}get currentInviteFriendsCount(){var t,n;return(((t=this.tasks.inviteFriends)==null?void 0:t.points)??[])[((n=this.tasks.inviteFriends)==null?void 0:n.level)??0][0]}get currentInviteFriendsPoints(){var t,n;return(((t=this.tasks.inviteFriends)==null?void 0:t.points)??[])[((n=this.tasks.inviteFriends)==null?void 0:n.level)??0][1]}get canShareStory(){const t=Telegram.WebApp.platform;return t==="android"||t==="android_x"||t==="ios"}get friendlyWalletAddress(){try{return _.Address.parseRaw(this.currentWallet.rawAddress).toString({urlSafe:!0,bounceable:!1,testOnly:!1})}catch{return""}}get truncatedWalletAddress(){const t=this.friendlyWalletAddress;if(t.length>0)return t.substring(0,6)+"···"+t.substring(t.length-6)}get showDailyStreakShortcut(){var t;return(((t=this.tasks.dailyStreak)==null?void 0:t.pointsPerDay.length)??0)>0&&!this.isDailyStreakDone}get showPostStoryShortcut(){var t;return(this.level??0)>1&&!this.isLevelUpStoryDone&&(((t=this.tasks.levelUpStory)==null?void 0:t.points)??0)>0}get maxAmount(){return Fs(this.tonBalance??0n)}get maxAmountFormatted(){return Ne(this.maxAmount)}get signedAmountFormatted(){return Ne(this.signedAmount)}get amountInNano(){const t=this.amount.trim();try{return _.toNano(t)}catch{return}}get isAmountValid(){const t=this.amountInNano;return t!=null&&t>=0n&&(this.tonBalance==null||t<=this.maxAmount)}get isAmountPositive(){const t=this.amountInNano;return t!=null&&t>0n}get youWillReceive(){const t=this.exchangeRate,n=this.amountInNano;if(t!=null)return n==null||!this.isAmountValid||!this.isAmountPositive?"hTON":`~ ${Ne(Number(n)*t)} hTON`}get exchangeRate(){const t=this.htonTreasuryState;if(t!=null)return Number(t.totalTokens)/Number(t.totalCoins)||1}get exchangeRateFormatted(){const t=this.htonTreasuryState;if(t!=null)return`1 hTON = ~ ${(Number(t.totalCoins)/Number(t.totalTokens)||1).toLocaleString(void 0,{maximumFractionDigits:4})} TON`}get transactionCostFormatted(){return`${(15e6/1e9).toLocaleString(void 0,{maximumFractionDigits:3})} TON`}get isWalletConnected(){return this.currentWallet.rawAddress!==""}get hasHtonWallet(){return this.htonWalletState!=null&&this.htonWalletState.tokens>0n}get tonBalanceFormatted(){return Ne(this.tonBalance??0n)}get htonBalanceFormatted(){var t;return Ne(((t=this.htonWalletState)==null?void 0:t.tokens)??0n)}}function Sn(e){return e.toLocaleString(void 0,{notation:"compact",maximumFractionDigits:0})}function le(e){return e.toLocaleString(void 0,{notation:"compact",maximumFractionDigits:1})}function Ne(e){return(Number(e)/1e9).toLocaleString(void 0,{maximumFractionDigits:2})}function Se(e,t=10){return new Promise(function(n,a){let o;const d=()=>{t<10&&console.warn("retry",t),t<=0?a(o??new Error):e().then(n).catch(g=>{t-=1,o=g,setTimeout(d)})};d()})}function Wn(e){return new Promise(t=>setTimeout(t,e))}const We=["#ff0000","#ff8000","#ffff00","#80ff00","#00ff00","#00ff80","#00ffff","#0080ff","#0000ff","#8000ff","#ff00ff","#ff0080"],Ft="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M20.75%207V16C20.75%2017.08%2020.13%2018.01%2019.23%2018.46C19.24%2018.31%2019.25%2018.16%2019.25%2018V9C19.25%206.66%2017.34%204.75%2015%204.75H6.63C7.09%203.86%208.01%203.25%209.08%203.25H17C19.07%203.25%2020.75%204.93%2020.75%207ZM15%206.25H6C4.483%206.25%203.25%207.483%203.25%209V18C3.25%2019.517%204.483%2020.75%206%2020.75H15C16.517%2020.75%2017.75%2019.517%2017.75%2018V9C17.75%207.483%2016.517%206.25%2015%206.25Z'%20fill='white'/%3e%3c/svg%3e",tt="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2024.1.1,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20512%20512'%20style='enable-background:new%200%200%20512%20512;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23FFFFFF;}%20%3c/style%3e%3cg%20id='_7-Check'%3e%3cpath%20class='st0'%20d='M78.2,237.1c-25.8,0.1-46.7,21.1-46.7,46.9c0,10.7,3.7,21.1,10.5,29.4L160.9,459c8.6,10.7,21.8,16.5,35.5,15.8%20c14.4-0.8,27.5-8.5,35.8-21.2L479.1,55.9c0-0.1,0.1-0.1,0.1-0.2c2.3-3.6,1.6-10.6-3.2-15c-5.3-4.9-13.6-4.6-18.5,0.7%20c-0.2,0.2-0.4,0.4-0.5,0.6c-0.1,0.1-0.2,0.2-0.3,0.3l-249,281.4c-4,4.5-10.8,4.9-15.2,0.9c0,0-0.1-0.1-0.1-0.1l-82.6-75.2%20C101.1,241.4,89.8,237.1,78.2,237.1L78.2,237.1z'/%3e%3c/g%3e%3c/svg%3e",_n="data:image/svg+xml,%3csvg%20width='20'%20height='16'%20viewBox='0%200%2020%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.5158%207.64852C8.47865%207.64852%2010.0699%205.93634%2010.0699%203.82426C10.0699%201.71218%208.47865%200%206.5158%200C4.55294%200%202.96173%201.71218%202.96173%203.82426C2.96173%205.93634%204.55294%207.64852%206.5158%207.64852Z'%20fill='white'/%3e%3cpath%20d='M9.77368%209.56067H3.25789C2.39404%209.56134%201.56575%209.9309%200.954908%2010.5882C0.34407%2011.2454%200.000627574%2012.1367%200%2013.0662V14.9784C0%2015.5061%200.398055%2015.9344%200.888517%2015.9344H12.1431C12.3787%2015.9344%2012.6047%2015.8337%2012.7713%2015.6544C12.938%2015.4751%2013.0316%2015.2319%2013.0316%2014.9784V13.0662C13.031%2012.1367%2012.6875%2011.2454%2012.0767%2010.5882C11.4658%209.9309%2010.6375%209.56134%209.77368%209.56067Z'%20fill='white'/%3e%3cpath%20d='M19.828%206.724H17.74V8.86H15.796V6.724H13.708V4.888H15.796V2.74H17.74V4.888H19.828V6.724Z'%20fill='white'/%3e%3c/svg%3e",st="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='72'%20height='72'%20viewBox='0%200%2072%2072'%20fill='none'%3e%3cpath%20d='M24%2056.7846C35.479%2063.412%2050.1572%2059.479%2056.7846%2047.9999C63.412%2036.5209%2059.479%2021.8427%2048%2015.2153C36.521%208.58791%2021.8428%2012.5209%2015.2154%2023.9999'%20stroke-width='4'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke='white'%3e%3c/path%3e%3c/svg%3e",Pn="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.8923%204.48214C12.7806%203.57589%2011.4325%202.85714%209.80427%202.85714C5.93509%202.85714%202.80122%206.05357%202.80122%2010C2.80122%2013.9464%205.93509%2017.1429%209.80427%2017.1429C12.8418%2017.1429%2015.433%2015.1652%2016.4003%2012.4062C16.5754%2011.9107%2017.0656%2011.5804%2017.5689%2011.6875L18.4837%2011.8839C18.987%2011.9911%2019.3153%2012.5%2019.1621%2013.0045C17.9059%2017.058%2014.1943%2020%209.80427%2020C4.39004%2020%200%2015.5223%200%2010C0%204.47768%204.39004%200%209.80427%200C12.4042%200%2014.4263%201.20982%2015.8838%202.45089L17.547%200.754464C17.814%200.482143%2018.2167%200.401786%2018.5625%200.549107C18.9082%200.696429%2019.1402%201.04464%2019.1402%201.42857V6.66518C19.1402%207.19196%2018.72%207.61607%2018.2079%207.61607H13.0738C12.6974%207.61607%2012.356%207.38393%2012.2116%207.02679C12.0671%206.66964%2012.1459%206.26339%2012.4129%205.99107L13.8923%204.48214Z'%20fill='white'/%3e%3c/svg%3e",En=M(({model:e})=>{let t;const n=e.friends.top.map((a,o)=>s.jsxs("div",{className:"relative z-0 my-4 flex flex-row items-center gap-4 rounded-2xl bg-gray3 bg-gradient-radial px-4 py-2",children:[s.jsx("img",{src:"https://t.me/i/userpic/160/"+a.username+".jpg",className:"absolute z-10 h-12 w-12 rounded-xl",loading:"lazy",onError:d=>{d.currentTarget.remove()}}),s.jsx("div",{className:"w-max rounded-xl bg-purple8 p-2",children:s.jsx("img",{src:Ye,className:"h-8 w-8"})}),s.jsxs("div",{className:"flex flex-1 flex-col gap-2 overflow-hidden",children:[s.jsxs("div",{className:"truncate",children:[a.first_name," ",a.last_name]}),s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx("img",{src:z,className:"h-4"}),s.jsx("div",{className:"text-sm",children:le(a.points)})]})]}),s.jsxs("div",{className:"flex min-w-16 flex-row items-center gap-1",children:[s.jsx("img",{src:z,className:"h-6"}),s.jsx("div",{className:"",children:le(a.inviter_points)})]})]},o));return s.jsxs("div",{className:"select-none p-4",children:[s.jsx("h3",{className:"text-center text-xl font-bold",children:"Invite Friends"}),s.jsx("p",{className:"my-2 text-center text-sm",children:"You and your friends will receive coins."}),s.jsxs("div",{className:"my-4 flex flex-col gap-8 rounded-xl bg-gray3 p-4",children:[s.jsxs("div",{className:"flex flex-row items-start gap-4",children:[s.jsx("img",{src:z,className:"h-12 w-12"}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("h4",{className:"font-bold",children:"Invite a Friend"}),s.jsxs("p",{children:[s.jsxs("span",{className:"mr-4 text-yellow1",children:["+",5e3.toLocaleString()]}),"For you and your friend"]})]})]}),s.jsxs("div",{className:"flex flex-row gap-4",children:[s.jsx("img",{src:z,className:"h-12 w-12"}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("h4",{className:"font-bold",children:"Invite a Friend with Telegram Premium"}),s.jsxs("p",{children:[s.jsxs("span",{className:"mr-4 text-yellow1",children:["+",25e3.toLocaleString()]}),"For you and your friend"]})]})]}),s.jsxs("div",{className:"flex flex-row gap-2",children:[s.jsxs("a",{className:"flex grow flex-row place-content-center rounded-xl bg-purple9 p-4",href:e.inviteHref,children:[s.jsx("div",{className:"font-medium",children:"Invite a Friend"}),s.jsx("img",{src:_n,className:"ml-3"})]}),s.jsxs("button",{className:"group rounded-xl bg-purple9 p-4",onClick:a=>{e.copyInviteLink();const o=a.currentTarget;o.classList.add("copied"),clearTimeout(t),t=setTimeout(()=>{o.classList.remove("copied")},2e3)},children:[s.jsx("img",{src:Ft,className:"h-6 w-6 group-[.copied]:hidden"}),s.jsx("img",{src:tt,className:"hidden h-6 w-6 group-[.copied]:block"})]})]})]}),s.jsxs("div",{className:"mb-4 mt-8 flex flex-row items-center",children:[s.jsxs("h4",{className:"h-6 flex-1 font-bold",children:["List of Your Friends",(e.friendsFetchState==="done"||e.friends.count>0)&&s.jsxs(s.Fragment,{children:[": ",e.friends.count.toLocaleString()]})]}),s.jsxs("div",{children:[e.friendsFetchState==="load"&&s.jsx("img",{src:st,className:"h-6 animate-spin"}),e.friendsFetchState==="error"&&s.jsx("img",{src:Pn,className:"h-6",onClick:e.sendFriends})]})]}),s.jsx("div",{children:n}),s.jsx("div",{className:"pointer-events-none fixed bottom-0 left-0 right-0 h-64 bg-gradient-to-t from-black from-25% to-transparent"}),s.jsx("div",{className:"mb-48"})]})}),Bn="/assets/coin-glow-Dtqb2orG.svg",se="data:image/svg+xml,%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20492%20492'%20style='enable-background:new%200%200%20492%20492;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23FFFFFF;}%20%3c/style%3e%3cg%3e%3cg%3e%3cpath%20class='st0'%20d='M382.7,226.8L163.7,7.9c-5.1-5.1-11.8-7.9-19-7.9s-14,2.8-19,7.9L109.5,24c-10.5,10.5-10.5,27.6,0,38.1%20l183.9,183.9L109.3,430c-5.1,5.1-7.9,11.8-7.9,19c0,7.2,2.8,14,7.9,19l16.1,16.1c5.1,5.1,11.8,7.9,19,7.9s14-2.8,19-7.9L382.7,265%20c5.1-5.1,7.9-11.9,7.8-19.1C390.5,238.7,387.8,231.9,382.7,226.8z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",pe="/assets/tick-DdNedSwi.png",Dn=M(({model:e})=>s.jsxs("div",{className:"flex select-none flex-col p-4",children:[s.jsx("img",{src:Bn,className:"-my-4 mx-auto h-36"}),s.jsx("h3",{className:"mb-4 text-center font-medium",children:"Complete tasks and earn coins!"}),e.tasks.groups.map((t,n)=>{var a;return s.jsxs("div",{className:"mb-8",children:[s.jsx("h4",{className:"px-4 font-bold",children:t.title}),s.jsxs("div",{children:[t.tasks.map((o,d)=>s.jsxs("div",{onClick:()=>{e.showTask(o)},className:"my-2 flex cursor-pointer flex-row items-center gap-4 rounded-2xl bg-gray3 px-4 py-2",children:[s.jsx("img",{src:"https://media.hipogang.io/task/"+o.icon,className:"h-12 w-12 flex-none"}),s.jsxs("div",{className:"flex flex-1 flex-col gap-0.5 overflow-hidden",children:[s.jsx("div",{className:"truncate",children:o.title}),s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx("img",{src:z,className:"h-4"}),s.jsx("div",{className:"text-yellow1",children:o.points.toLocaleString()})]})]}),s.jsx("div",{className:"w-6 flex-none",children:o.state===2?s.jsx("img",{src:pe,className:"h-6 w-6"}):s.jsx("img",{src:se,className:"h-4 w-4"})})]},d)),t.id==="simple"&&(e.level??0)>1&&s.jsxs("div",{onClick:e.showLevelUpStory,className:"my-2 flex cursor-pointer flex-row items-center gap-4 rounded-2xl bg-gray3 px-4 py-2",children:[s.jsx("img",{src:"https://media.hipogang.io/task/levelupstory.png",className:"h-12 w-12 flex-none"}),s.jsxs("div",{className:"flex flex-1 flex-col gap-0.5 overflow-hidden",children:[s.jsx("div",{className:"truncate",children:"Post Your Level Up Story"}),s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx("img",{src:z,className:"h-4"}),s.jsx("div",{className:"text-yellow1",children:(((a=e.tasks.levelUpStory)==null?void 0:a.points)??0).toLocaleString()})]})]}),s.jsx("div",{className:"w-6 flex-none",children:e.isLevelUpStoryDone?s.jsx("img",{src:pe,className:"h-6 w-6"}):s.jsx("img",{src:se,className:"h-4 w-4"})})]}),t.id==="simple"&&e.showInviteFriendsTask&&s.jsxs("div",{onClick:()=>{e.showTask({id:"invitefriends",points:e.currentInviteFriendsPoints,groupId:"simple",icon:"invitefriends.png",title:"Invite "+e.currentInviteFriendsCount.toString()+" Friends",subtitle:"",action:"",url:"",weight:0,state:1})},className:"my-2 flex cursor-pointer flex-row items-center gap-4 rounded-2xl bg-gray3 px-4 py-2",children:[s.jsx("img",{src:"https://media.hipogang.io/task/invitefriends.png",className:"h-12 w-12 flex-none"}),s.jsxs("div",{className:"flex flex-1 flex-col gap-0.5 overflow-hidden",children:[s.jsxs("div",{className:"truncate",children:["Invite ",e.currentInviteFriendsCount," Friends"]}),s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx("img",{src:z,className:"h-4"}),s.jsx("div",{className:"text-yellow1",children:e.currentInviteFriendsPoints.toLocaleString()})]})]}),s.jsx("div",{className:"w-6 flex-none",children:s.jsx("img",{src:se,className:"h-4 w-4"})})]}),t.id==="daily"&&e.currentDailyStreakPoints>0&&s.jsxs("div",{onClick:()=>{e.showDailyStreak(!0)},className:"my-2 flex cursor-pointer flex-row items-center gap-4 rounded-2xl bg-gray3 px-4 py-2",children:[s.jsx("img",{src:"https://media.hipogang.io/task/dailystreak.png",className:"h-12 w-12 flex-none"}),s.jsxs("div",{className:"flex flex-1 flex-col gap-0.5 overflow-hidden",children:[s.jsx("div",{className:"truncate",children:"Daily Reward"}),s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx("img",{src:z,className:"h-4"}),s.jsx("div",{className:"text-yellow1",children:e.currentDailyStreakPoints.toLocaleString()})]})]}),s.jsx("div",{className:"w-6 flex-none",children:e.isDailyStreakDone?s.jsx("img",{src:pe,className:"h-6 w-6"}):s.jsx("img",{src:se,className:"h-4 w-4"})})]})]})]},n)}),s.jsx("div",{className:"pointer-events-none fixed bottom-0 left-0 right-0 h-64 bg-gradient-to-t from-black from-25% to-transparent"}),s.jsx("div",{className:"mb-48"})]})),Fn="/assets/hpo-glow-BR6yBB8P.svg",Lt="/assets/connectwallet-D8Nbmm0B.png",It="/assets/staketon-DeTT5lzW.png",nt="/assets/ton-ObvFX1TS.png",Ot="/assets/hton-Bvr3Dpaa.png",Ln=M(({model:e})=>s.jsxs("div",{className:"select-none p-4",children:[s.jsx("img",{src:Fn,className:"mx-auto mb-4 h-36"}),s.jsx("h3",{className:"text-center text-2xl font-bold",children:"$HPO Airdrop"}),s.jsx("p",{className:"mb-8 mt-2 text-center",children:"Earn $HPO, the Governance Token of Hipo!"}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{onClick:()=>{e.currentWallet.rawAddress===""?e.connectWallet():e.showConnectedWallet(!0)},className:"flex h-16 cursor-pointer flex-row items-center gap-4 rounded-2xl px-4 py-2"+(e.currentWallet.rawAddress===""?" bg-blue":" bg-gray3"),children:[s.jsx("img",{src:Lt,className:"h-10 w-10 object-contain"}),s.jsxs("div",{className:"flex flex-1 flex-col",children:[e.currentWallet.rawAddress===""&&s.jsx("div",{children:"Connect Your TON Wallet"}),e.currentWallet.rawAddress!==""&&s.jsx("div",{className:"font-mono",children:e.truncatedWalletAddress}),e.currentWallet.rawAddress===""&&e.currentWallet.connectedWalletsCount===0&&s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx("img",{src:z,className:"h-4"}),s.jsxs("div",{className:"text-yellow1",children:["+",e.currentWallet.connectWalletPoints.toLocaleString()]})]})]}),s.jsxs("div",{className:"w-6 flex-none",children:[e.currentWallet.rawAddress===""&&s.jsx("img",{src:se,className:"h-4 w-4"}),e.currentWallet.rawAddress!==""&&s.jsx("img",{src:pe,className:"h-6 w-6"})]})]}),s.jsxs("div",{onClick:()=>{e.setActivePage("staketon")},className:"flex h-16 cursor-pointer flex-row items-center gap-4 rounded-2xl bg-gray3 px-4 py-2",children:[s.jsx("img",{src:It,className:"h-10 w-10 object-contain"}),s.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[s.jsx("div",{children:"Stake TON in Hipo"}),!e.currentWallet.htonWalletActivated&&s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx("img",{src:z,className:"h-4"}),s.jsxs("div",{className:"text-yellow1",children:["+",e.currentWallet.htonActivationPoints.toLocaleString()]})]}),e.currentWallet.htonWalletActivated&&e.currentWallet.rawAddress!==""&&s.jsxs("div",{className:"flex flex-row items-center gap-4",children:[s.jsxs("div",{className:"flex flex-row items-center gap-1 text-sm",children:[s.jsx("img",{src:Ot,className:"h-5 w-5 object-contain"}),s.jsx("div",{children:e.htonBalanceFormatted})]}),s.jsxs("div",{className:"flex flex-row items-center gap-1 text-sm",children:[s.jsx("img",{src:nt,className:"h-5 w-5 object-contain"}),s.jsx("div",{children:e.tonBalanceFormatted})]})]})]}),s.jsxs("div",{className:"w-6 flex-none",children:[(!e.hasHtonWallet||!e.currentWallet.htonWalletActivated)&&s.jsx("img",{src:se,className:"h-4 w-4"}),e.hasHtonWallet&&e.currentWallet.htonWalletActivated&&s.jsx("img",{src:pe,className:"h-6 w-6"})]})]})]}),s.jsx("div",{className:"pointer-events-none fixed bottom-0 left-0 right-0 h-64 bg-gradient-to-t from-black from-25% to-transparent"}),s.jsx("div",{className:"mb-48"})]})),In=M(({model:e})=>{var n;const t=(e.leaders[e.shownLevel-1]??[]).map((a,o)=>s.jsxs("div",{className:"relative z-0 my-4 flex flex-row items-center gap-4 rounded-2xl bg-gray3 bg-gradient-radial px-4 py-2",children:[s.jsx("img",{src:"https://t.me/i/userpic/160/"+a.username+".jpg",className:"absolute z-10 h-12 w-12 rounded-xl",loading:"lazy",onError:d=>{d.currentTarget.remove()}}),s.jsx("div",{className:"w-max rounded-xl bg-purple8 p-2",children:s.jsx("img",{src:Ye,className:"h-8 w-8"})}),s.jsxs("div",{className:"flex max-w-64 flex-col gap-2 overflow-hidden",children:[s.jsxs("div",{className:"truncate",children:[a.first_name," ",a.last_name]}),s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx("img",{src:z,className:"h-4"}),s.jsx("div",{className:"text-sm",children:le(a.points)})]})]}),s.jsx("div",{className:"ml-auto flex flex-row items-center",children:s.jsx("div",{className:"text-2xl",children:o+1})})]},o));return s.jsxs("div",{className:"select-none p-4",children:[s.jsxs("div",{className:"relative -mx-4 flex flex-row items-stretch gap-1",children:[s.jsx("div",{className:"absolute -z-10 mx-auto h-40 w-full bg-pink1 blur-3xl"}),s.jsx("img",{src:se,className:"w-14 flex-none rotate-180 cursor-pointer px-4"+(e.shownLevel>1?"":" invisible"),onClick:()=>{e.showLevel(e.shownLevel-1)}}),s.jsxs("div",{className:"flex flex-1 flex-col items-center",children:[e.levels.map((a,o)=>s.jsx("img",{src:"./gang/"+(o+1).toString()+".png",className:"max-h-[45vh] flex-none object-contain"+(o+1===e.shownLevel?"":" hidden")},o)),s.jsx("h3",{className:"mb-2 text-xl font-bold drop-shadow-md",children:e.levels[e.shownLevel-1].name}),s.jsxs("p",{className:"text-xs font-bold opacity-75"+(e.level!==e.shownLevel?"":" invisible"),children:["From ",le(e.levels[e.shownLevel-1].min_points)]})]}),s.jsx("img",{src:se,className:"w-14 flex-none cursor-pointer px-4"+(e.shownLevel<e.levels.length?"":" invisible"),onClick:()=>{e.showLevel(e.shownLevel+1)}})]}),s.jsxs("div",{className:"-mt-4 flex flex-col items-center"+(e.level===e.shownLevel?"":" hidden"),children:[s.jsxs("div",{className:"text-xs font-bold opacity-75",children:[le(e.points??0)," /"," ",le(e.levels[e.level??1].min_points)]}),s.jsxs("div",{className:"relative mx-4 mt-2 w-full cursor-pointer rounded-full border-2 border-gray4 border-opacity-70",children:[s.jsx("div",{className:"absolute h-2 rounded-full bg-gradient-to-r from-purple10 via-purple11 to-purple12",style:{width:(((n=e.levelProgress)==null?void 0:n.toString())??"0")+"%"}}),s.jsx("div",{className:"h-2 rounded-full bg-gray2"})]})]}),s.jsx("div",{children:t}),s.jsx("div",{className:"pointer-events-none fixed bottom-0 left-0 right-0 h-64 bg-gradient-to-t from-black from-25% to-transparent"}),s.jsx("div",{className:"mb-48"})]})}),On="data:image/svg+xml,%3csvg%20width='13'%20height='13'%20viewBox='0%200%2013%2013'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.3408%208.11808C6.33939%208.11808%206.33799%208.11808%206.33658%208.11808C6.07783%208.11573%205.86971%207.90409%205.87205%207.64511L5.87416%207.41074C5.87416%207.39738%205.87486%207.38378%205.87627%207.37042C5.94119%206.68863%206.39377%206.27073%206.75775%205.93488C6.88103%205.82097%206.99775%205.71339%207.09713%205.60113C7.2183%205.46448%207.39408%205.18464%207.20916%204.84691C6.99611%204.45691%206.4758%204.34652%206.0715%204.43909C5.64916%204.53566%205.49354%204.89636%205.43822%205.10261C5.37119%205.35269%205.11408%205.50105%204.864%205.43425C4.61393%205.36722%204.46557%205.11011%204.53236%204.86003C4.71916%204.1623%205.20385%203.67597%205.86197%203.52527C6.74768%203.323%207.63971%203.68089%208.03135%204.39691C8.35736%204.99316%208.26807%205.69277%207.79815%206.22292C7.6676%206.37011%207.52814%206.49902%207.39314%206.62347C7.05682%206.93402%206.84658%207.14167%206.81096%207.44144L6.80908%207.65308C6.80721%207.91112%206.59768%208.11808%206.3408%208.11808Z'%20fill='white'/%3e%3cpath%20d='M6.34058%209.52341C6.2187%209.52341%206.09683%209.47419%206.01011%209.38748C5.92104%209.30076%205.87183%209.17888%205.87183%209.05466C5.87183%208.93279%205.92104%208.81091%206.01011%208.72419C6.18354%208.55076%206.49761%208.55076%206.67104%208.72419C6.76011%208.81091%206.80933%208.93279%206.80933%209.05466C6.80933%209.17888%206.76011%209.29841%206.67339%209.38748C6.58433%209.47419%206.46479%209.52341%206.34058%209.52341Z'%20fill='white'/%3e%3cpath%20d='M6.48199%2012.593C5.94878%2012.593%205.42027%2012.5237%204.91097%2012.3865C2.71628%2011.7962%200.997845%209.97811%200.533079%207.75459C0.0594073%205.48936%200.933626%203.10811%202.76058%201.68803C3.81667%200.867017%205.14863%200.414673%206.51128%200.414673C7.45464%200.414673%208.39144%200.634048%209.22066%201.04866C11.2684%202.07311%2012.5914%204.21342%2012.5914%206.50163C12.5914%208.36866%2011.7104%2010.1682%2010.2348%2011.3152C9.17495%2012.1393%207.84206%2012.593%206.48199%2012.593ZM6.51152%201.35217C5.35628%201.35217%204.22847%201.7342%203.3362%202.42819C1.79003%203.63006%201.04988%205.64545%201.45089%207.56264C1.84417%209.4435%203.298%2010.9817%205.15472%2011.4812C5.58456%2011.5967%206.03128%2011.6555%206.48199%2011.6555C7.63464%2011.6555%208.76316%2011.2719%209.65964%2010.5751C10.9086%209.60428%2011.6542%208.08155%2011.6542%206.50163C11.6542%204.56545%2010.5346%202.7542%208.80159%201.88725C8.10175%201.53733%207.31003%201.35217%206.51152%201.35217Z'%20fill='white'/%3e%3c/svg%3e",Ut="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2024.1.1,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20512%20512'%20style='enable-background:new%200%200%20512%20512;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23FFFFFF;}%20%3c/style%3e%3cg%3e%3cg%3e%3ccircle%20class='st0'%20cx='333'%20cy='66.2'%20r='66.2'/%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%3e%3cpath%20class='st0'%20d='M182.5,75.2c-36.6,0-66.2,29.6-66.2,66.2c0,2.8,0.2,5.6,0.5,8.3h131.3c0.3-2.7,0.5-5.5,0.5-8.3%20C248.7,104.8,219.1,75.2,182.5,75.2z'/%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%3e%3cpath%20class='st0'%20d='M312.9,260.1h142.5v-54.8c0-13.5-10.9-24.4-24.4-24.4H46.6c-13.5,0-24.4,10.9-24.4,24.4v282.3%20c0,13.5,10.9,24.4,24.4,24.4h384.5c13.5,0,24.4-10.9,24.4-24.4v-54.8H312.9c-29.4,0-53.2-23.9-53.2-53.2v-66.3%20C259.7,284,283.6,260.1,312.9,260.1z'/%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%3e%3cpath%20class='st0'%20d='M469.9,293.4H312.9c-11,0-20,8.9-20,20v66.3c0,11,8.9,20,20,20h156.9c11,0,20-8.9,20-20v-66.3%20C489.8,302.3,480.9,293.4,469.9,293.4z%20M346,369.9c-12.9,0-23.4-10.5-23.4-23.4S333,323,346,323s23.4,10.5,23.4,23.4%20C369.4,359.4,358.9,369.9,346,369.9z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Un=M(({model:e})=>s.jsxs("div",{className:"flex select-none flex-col items-center gap-4 p-4",children:[s.jsx("img",{src:It,className:"mx-auto h-36"}),s.jsx("h3",{className:"text-center text-2xl font-bold",children:"Stake TON in Hipo"}),!e.currentWallet.htonWalletActivated&&s.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s.jsx("img",{src:z,className:"h-6"}),s.jsxs("div",{className:"my-4 text-xl text-yellow1",children:["+",e.currentWallet.htonActivationPoints.toLocaleString()]})]}),e.hasHtonWallet&&!e.currentWallet.htonWalletActivated&&s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsxs("div",{className:"",children:["Hooray! You have ",e.htonBalanceFormatted," hTON."]}),s.jsx("div",{className:"",children:"Check your reward!"}),s.jsx("div",{className:"pointer-events-none mb-60"}),s.jsx("div",{className:"pointer-events-none fixed bottom-16 left-0 right-0 flex h-48 flex-col place-content-end bg-gradient-to-t from-black from-50% to-transparent p-8",children:s.jsx("button",{className:"pointer-events-auto h-16 w-full rounded-lg bg-purple9 text-xl font-bold",onClick:e.claimHtonWalletActivated,children:"Check"})})]}),(!e.hasHtonWallet||e.currentWallet.htonWalletActivated)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex w-full flex-col gap-4 px-8 text-sm",children:[s.jsx("div",{className:"text-center",children:"Enter TON amount to stake"}),s.jsx("label",{children:s.jsxs("div",{className:"flex flex-row items-center rounded-lg bg-gray3 p-2",children:[s.jsx("img",{src:nt,className:"h-10 w-10 object-contain"}),s.jsx("input",{type:"text",inputMode:"decimal",placeholder:"Amount",size:1,className:"h-full w-full flex-1 bg-gray3 px-3 focus:outline-none"+(e.isAmountValid?"":" text-red-500"),value:e.amount,onInput:t=>{var a,o;const n=t.target;e.setAmount(n.value),((o=(a=n.parentElement)==null?void 0:a.parentElement)==null?void 0:o.parentElement)!=null&&n.parentElement.parentElement.parentElement.scrollIntoView()},onFocus:t=>{const n=t.target;setTimeout(()=>{var a,o;((o=(a=n.parentElement)==null?void 0:a.parentElement)==null?void 0:o.parentElement)!=null&&n.parentElement.parentElement.parentElement.scrollIntoView()},1e3)}}),e.tonBalance!=null&&s.jsxs("button",{onClick:e.setAmountToMax,className:"rounded bg-black px-2 py-1",children:["Max: ",e.maxAmountFormatted]})]})}),s.jsxs("div",{className:"flex flex-row flex-wrap",children:[s.jsx("div",{children:"You will receive"}),s.jsx("div",{className:"ml-auto",children:e.youWillReceive})]}),s.jsxs("div",{className:"flex flex-row flex-wrap",children:[s.jsx("div",{children:"Exchange rate"}),s.jsx("div",{className:"ml-auto",children:e.exchangeRateFormatted})]}),s.jsxs("div",{className:"relative flex flex-row flex-wrap",children:[s.jsxs("div",{className:"peer flex flex-row items-center gap-1",children:[s.jsx("div",{children:"Transaction cost"}),s.jsx("img",{src:On,className:"h-4 w-4 object-contain"})]}),s.jsx("div",{className:"pointer-events-none absolute bottom-5 mx-4 hidden rounded bg-blue p-2 peer-hover:block",children:"This fee is an average, but to ensure all cases are covered, we initially send extra gas, which is later refunded to your wallet."}),s.jsx("div",{className:"ml-auto",children:e.transactionCostFormatted})]})]}),s.jsx("div",{className:"mb-60"}),s.jsxs("div",{className:"pointer-events-none fixed bottom-16 left-0 right-0 flex h-48 flex-col place-content-end bg-gradient-to-t from-black from-50% to-transparent p-8",children:[!e.isWalletConnected&&s.jsxs("button",{className:"pointer-events-auto flex h-16 w-full flex-row place-content-center items-center gap-2 rounded-lg bg-blue font-medium",onClick:e.connectWallet,children:[s.jsx("img",{src:Ut,className:"h-6 w-6 object-contain"}),s.jsx("div",{children:"Connect Your TON Wallet"})]}),e.isWalletConnected&&s.jsx("button",{className:"pointer-events-auto h-16 w-full rounded-lg bg-purple9 text-xl font-bold disabled:bg-gray disabled:text-gray4",disabled:!e.isAmountPositive||!e.isAmountValid||e.tonBalance==null,onClick:e.send,children:"Stake"})]})]})]})),Mn=M(({model:e})=>{let t=s.jsx(s.Fragment,{});switch(e.activePage){case"tap":t=s.jsx(Ps,{model:e});break;case"friends":t=s.jsx(En,{model:e});break;case"tasks":t=s.jsx(Dn,{model:e});break;case"airdrop":t=s.jsx(Ln,{model:e});break;case"levels":t=s.jsx(In,{model:e});break;case"staketon":t=s.jsx(Un,{model:e})}return t}),Ze="/assets/logo-SWJL6V13.png",Hn=M(({model:e})=>s.jsx("div",{className:"flex h-screen w-screen place-content-center bg-black p-8 text-white",children:s.jsxs("div",{className:"flex w-auto max-w-96 flex-1 flex-col place-content-center items-center",children:[s.jsx("img",{src:Ze,className:"my-8 h-48 w-48"}),e.errorPage==="upgrade"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 px-4",children:[s.jsx("h3",{className:"my-4 text-center text-2xl font-bold text-purple9",children:"Upgrade Telegram"}),s.jsx("p",{className:"my-4 text-lg font-bold text-white",children:"It looks like that you're using an older version of Telegram. Please upgrade it to the latest version, and then try again."})]}),s.jsx("button",{onClick:e.close,className:"w-64 rounded-2xl bg-purple9 py-4 text-white",children:"Close"})]}),e.errorPage==="blocked"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 px-4",children:[s.jsx("h3",{className:"my-4 text-center text-2xl font-bold text-purple9",children:"Account Blocked"}),s.jsx("p",{className:"my-4 text-lg font-bold text-white",children:"Your account is blocked, and you cannot login."})]}),s.jsx("button",{onClick:e.close,className:"w-64 rounded-2xl bg-purple9 py-4 text-white",children:"Close"})]}),e.errorPage==="no-invitation"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 px-4",children:[s.jsx("h3",{className:"my-4 text-center text-2xl font-bold text-purple9",children:"Welcome to Hipo Gang!"}),s.jsx("p",{className:"my-4 text-lg font-bold text-white",children:"To join, you'll need an invitation. Reach out to a current member or join the Hipo community to request one."})]}),s.jsx("button",{onClick:t=>{t.currentTarget.onclick=e.close,t.currentTarget.innerText="Close",Telegram.WebApp.openLink("https://t.me/HipoFinance",{try_instant_view:!0})},className:"w-64 rounded-2xl bg-purple9 py-4 text-white",children:"Join Hipo Channel"})]})]})})),yt="data:image/svg+xml,%3csvg%20clip-rule='evenodd'%20fill-rule='evenodd'%20height='512'%20stroke-linejoin='round'%20stroke-miterlimit='2'%20viewBox='0%200%2032%2032'%20width='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20transform='translate(-192%20-96)'%3e%3cg%20transform='translate(144.003)'%3e%3ccircle%20cx='64'%20cy='112'%20fill='%2327d935'%20r='15'/%3e%3c/g%3e%3cg%20transform='translate(144.003)'%3e%3ccircle%20cx='64'%20cy='112'%20fill='%2327d935'%20r='15'/%3e%3c/g%3e%3cpath%20d='m200.293%20112.707%205%205c.39.391%201.024.391%201.414%200l9-9c.39-.39.39-1.024%200-1.414s-1.024-.39-1.414%200l-8.293%208.293s-4.293-4.293-4.293-4.293c-.39-.39-1.024-.39-1.414%200s-.39%201.024%200%201.414z'%20fill='%23fff'/%3e%3c/g%3e%3c/svg%3e",At="data:image/svg+xml,%3csvg%20height='512pt'%20viewBox='0%200%20512%20512'%20width='512pt'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m256%200c-141.164062%200-256%20114.835938-256%20256s114.835938%20256%20256%20256%20256-114.835938%20256-256-114.835938-256-256-256zm0%200'%20fill='%23f44336'/%3e%3cpath%20d='m350.273438%20320.105469c8.339843%208.34375%208.339843%2021.824219%200%2030.167969-4.160157%204.160156-9.621094%206.25-15.085938%206.25-5.460938%200-10.921875-2.089844-15.082031-6.25l-64.105469-64.109376-64.105469%2064.109376c-4.160156%204.160156-9.621093%206.25-15.082031%206.25-5.464844%200-10.925781-2.089844-15.085938-6.25-8.339843-8.34375-8.339843-21.824219%200-30.167969l64.109376-64.105469-64.109376-64.105469c-8.339843-8.34375-8.339843-21.824219%200-30.167969%208.34375-8.339843%2021.824219-8.339843%2030.167969%200l64.105469%2064.109376%2064.105469-64.109376c8.34375-8.339843%2021.824219-8.339843%2030.167969%200%208.339843%208.34375%208.339843%2021.824219%200%2030.167969l-64.109376%2064.105469zm0%200'%20fill='%23fafafa'/%3e%3c/svg%3e",Rn=M(({model:e})=>{const t=e.messages.map(n=>s.jsx("div",{id:"m"+n.time.toString(),className:"max-h-0 w-full overflow-hidden transition-all duration-500",children:s.jsxs("div",{className:"mb-2 flex flex-row gap-2 rounded-2xl bg-white bg-opacity-90 p-2 text-sm text-black",children:[n.type==="success"&&s.jsx("img",{src:yt,className:"w-5"}),n.type==="failure"&&s.jsx("img",{src:At,className:"w-5"}),s.jsx("div",{className:"",children:n.text})]})},n.time));return s.jsxs("div",{id:"messageDisplay",className:"pointer-events-none fixed left-0 right-0 top-0 z-10 flex max-w-screen-sm flex-col items-center p-4",children:[s.jsx("img",{src:yt,loading:"lazy",className:"hidden"}),s.jsx("img",{src:At,loading:"lazy",className:"hidden"}),t]})}),Vn=M(({model:e})=>s.jsx(s.Fragment,{children:e.showSplash&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 top-0 z-30 flex h-screen w-screen place-content-center overflow-scroll bg-black",children:s.jsx("img",{src:"welcome.jpg?v=1",className:"h-screen w-screen object-contain object-top"})})})),qn=M(({model:e})=>s.jsxs("div",{className:"pointer-events-none fixed bottom-0 left-0 right-0 top-0 z-20"+(e.connected?" hidden":""),children:[s.jsx("div",{className:"absolute -z-10 h-screen w-screen bg-gradient-to-b from-black to-purple10 opacity-50"}),s.jsxs("div",{className:"mx-auto flex w-max flex-row place-content-center gap-2 rounded-b-2xl bg-black p-4 text-white shadow-lg shadow-purple3",children:[s.jsx("img",{src:st,className:"h-6 animate-spin"}),s.jsx("div",{className:"",children:"Connecting..."})]})]})),zn=M(({model:e})=>s.jsx(s.Fragment,{children:!e.hideWelcome&&s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 top-0 z-20 flex h-screen w-screen place-content-center overflow-y-scroll overscroll-contain bg-black",children:[e.welcomeTab===0&&s.jsxs("div",{className:"flex flex-col items-center px-4 py-16",children:[s.jsx("img",{src:Ze,className:"my-8 h-48 w-48 object-contain"}),s.jsxs("div",{children:[s.jsx("h3",{className:"my-4 text-center text-2xl font-bold text-purple9",children:"Welcome to Hipo Gang"}),s.jsx("p",{className:"mb-48 mt-4 px-8 text-lg font-bold text-white",children:"Earn $HPO in the first DeFi Tap-to-Earn game on TON."})]}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 flex min-h-48 flex-col place-content-end items-center bg-gradient-to-t from-black from-50% to-transparent p-4",children:[s.jsxs("div",{className:"my-4 flex w-48 flex-row gap-2",children:[s.jsx("div",{className:"h-1 flex-1 rounded-full bg-purple9"}),s.jsx("div",{className:"h-1 flex-1 rounded-full bg-gray3"})]}),s.jsx("button",{onClick:()=>{e.setWelcomeTab(1)},className:"h-16 w-full rounded-2xl bg-purple9 py-4 text-white",children:"Next"})]})]}),e.welcomeTab===1&&s.jsxs("div",{className:"flex flex-col items-center px-4 py-16",children:[s.jsx("img",{src:Ze,className:"my-8 h-48 w-48 object-contain"}),s.jsxs("div",{children:[s.jsx("h3",{className:"my-4 text-center text-2xl font-bold text-purple9",children:"Your Mission"}),s.jsx("p",{className:"mb-48 mt-4 px-8 text-lg font-bold text-white",children:"Increase your coins by tapping, inviting friends, completing tasks, and investing."})]}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 flex min-h-48 flex-col place-content-end items-center bg-gradient-to-t from-black from-50% to-transparent p-4",children:[s.jsxs("div",{className:"my-4 flex w-48 flex-row gap-2",children:[s.jsx("div",{className:"h-1 flex-1 rounded-full bg-gray3"}),s.jsx("div",{className:"h-1 flex-1 rounded-full bg-purple9"})]}),s.jsx("button",{onClick:()=>{e.closeWelcome()},className:"h-16 w-full rounded-2xl bg-purple9 py-4 text-white",children:"Let's Join the Gang!"})]})]})]})})),Gn=M(({model:e})=>{var t;return s.jsx(s.Fragment,{children:e.shownDailyStreak&&s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 top-0 z-10",children:[s.jsx("div",{className:"absolute -z-10 h-screen w-screen bg-gradient-to-b from-black to-purple10 opacity-50",onClick:()=>{e.showDailyStreak(!1)}}),s.jsxs("div",{id:"daily-streak",className:"fixed bottom-0 left-0 right-0 flex max-h-[95vh] flex-col items-center gap-4 overflow-y-scroll overscroll-contain rounded-t-4xl border-t-2 border-t-purple1 bg-black px-8 py-8",children:[s.jsx("img",{src:"https://media.hipogang.io/task/dailystreak.png",className:"h-16"}),s.jsx("h3",{className:"text-center text-2xl font-bold",children:"Daily Reward"}),s.jsx("h4",{className:"px-10 text-center",children:"Claim rewards by logging into the game daily—don't miss a day!"}),s.jsx("div",{className:"mb-40 mt-2 grid w-full grid-flow-row grid-cols-3 gap-2",children:(((t=e.tasks.dailyStreak)==null?void 0:t.pointsPerDay)??[]).map((n,a,o)=>{var S,h,w,P;const d=(((S=e.tasks.dailyStreak)==null?void 0:S.count)??0)>a&&(a<(((h=e.tasks.dailyStreak)==null?void 0:h.pointsPerDay.length)??0)-1||e.isDailyStreakDone),g=!e.isDailyStreakDone&&Math.min(((w=e.tasks.dailyStreak)==null?void 0:w.count)??0,(((P=e.tasks.dailyStreak)==null?void 0:P.pointsPerDay.length)??0)-1)===a;let x="Day "+(a+1).toString();return a===o.length-1&&(x+=" and More"),s.jsxs("div",{className:"pointer-events-none flex flex-col items-center gap-1 rounded-xl border py-4"+(a===o.length-1&&a%3===0?" col-span-3":"")+(d?" bg-gradient-to-b from-green1 to-green2":" bg-gray3")+(d||g?" border-green1":" border-purple10 opacity-70")+(!d&&g?" shadow-lg shadow-green1":""),children:[s.jsx("div",{className:"text-sm",children:x}),s.jsxs("div",{className:"flex flex-row items-center gap-2",children:[s.jsx("img",{src:z,className:"h-5"+(d||g?"":" grayscale")}),s.jsx("div",{className:"text-xl font-medium",children:le(n)})]})]},a)})}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 flex h-48 flex-col place-content-end bg-gradient-to-t from-black from-50% to-transparent p-8",children:s.jsxs("button",{className:"h-16 w-full rounded-lg bg-purple9"+(e.isDailyStreakDone?" text-sm":" text-xl font-bold"),onClick:()=>{e.isDailyStreakDone?e.showDailyStreak(!1):e.claimDailyStreak()},children:[!e.isDailyStreakDone&&"Check",e.isDailyStreakDone&&"Come Back Tomorrow"]})})]})]})})}),Jn=M(({model:e})=>s.jsx(s.Fragment,{children:e.shownTask!=null&&s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 top-0 z-10",children:[s.jsx("div",{className:"absolute -z-10 h-screen w-screen bg-gradient-to-b from-black to-purple10 opacity-50",onClick:()=>{e.showTask(void 0)}}),s.jsxs("div",{id:"task-"+e.shownTask.id,className:"fixed bottom-0 left-0 right-0 flex max-h-[90vh] flex-col items-center gap-4 overflow-y-scroll overscroll-contain rounded-t-4xl border-t-2 border-t-purple1 bg-black px-8 py-12",children:[s.jsx("img",{src:"https://media.hipogang.io/task/"+e.shownTask.icon,className:"h-32"}),s.jsx("h3",{className:"text-center text-2xl font-bold",children:e.shownTask.title}),s.jsx("h4",{className:"text-center",children:e.shownTask.subtitle}),e.shownTask.story==null&&e.shownTask.url!==""&&s.jsx("a",{className:"rounded-lg bg-purple9 px-12 py-2 text-lg font-medium",href:e.shownTask.url,target:"_blank",rel:"noreferrer",onClick:()=>{e.taskOpened(e.shownTask)},children:e.shownTask.action}),e.shownTask.story!=null&&s.jsxs(s.Fragment,{children:[e.canShareStory&&s.jsx("button",{className:"rounded-lg bg-purple9 px-12 py-2 text-lg font-medium",onClick:e.shareTaskStory,children:e.shownTask.action}),!e.canShareStory&&s.jsx("p",{className:"text-yellow1",children:"To post your story, please use your mobile."})]}),e.shownTask.id==="levelupstory"&&s.jsx("button",{onClick:e.shareLevelUpStory,className:"rounded-lg bg-purple9 px-12 py-2 text-lg font-medium",children:"Share"}),s.jsxs("div",{className:"my-4 flex flex-row items-center",children:[s.jsx("img",{src:z,className:"mx-2 h-8"}),s.jsxs("div",{className:"text-xl font-medium",children:["+",e.shownTask.points.toLocaleString()]})]}),e.shownTask.id!=="levelupstory"&&e.shownTask.state<2&&s.jsx("button",{className:"rounded-lg bg-purple9 px-24 py-3 text-xl font-medium disabled:bg-gray disabled:text-gray4",disabled:e.shownTask.state!==1,onClick:()=>{e.taskClaimed(e.shownTask)},children:"Check"}),e.shownTask.id==="levelupstory"&&e.shownTask.state<2&&s.jsxs(s.Fragment,{children:[!e.canShareStory&&s.jsx("p",{className:"text-yellow1",children:"To post your story, please use your mobile."}),e.canShareStory&&s.jsx("button",{onClick:e.claimLevelUpStory,className:"rounded-lg bg-purple9 px-24 py-3 text-xl font-medium",children:"Check"})]}),e.shownTask.state==2&&s.jsx("img",{src:pe,className:"mt-1 h-12"})]})]})})),Kn="/assets/star-KBjK7Vd8.png",Qn=M(({model:e})=>s.jsx(s.Fragment,{children:e.levelUp&&e.levels.length>0&&s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 top-0 z-10",children:[s.jsx("div",{className:"absolute -z-10 h-screen w-screen bg-gradient-to-b from-black to-purple10 opacity-50",onClick:e.hideLevelUp}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 flex max-h-[90vh] flex-col items-center gap-4 overflow-y-scroll overscroll-contain rounded-t-4xl border-t-2 border-t-purple1 bg-black px-8 py-4",children:[s.jsx("img",{src:Kn,className:"-my-4 h-32"}),s.jsx("h3",{className:"text-3xl font-bold",children:"Level Up!"}),s.jsx("h3",{className:"text-2xl",children:e.levels[(e.level??1)-1].name}),s.jsxs("div",{className:"my-4 flex w-full flex-row",children:[s.jsxs("div",{className:"flex flex-1 flex-col items-center",children:[s.jsx("p",{className:"text-lg",children:"Tap Power"}),s.jsx("p",{className:"font-bold",children:e.levels[(e.level??1)-1].tap_points})]}),s.jsxs("div",{className:"flex flex-1 flex-col items-center",children:[s.jsx("p",{className:"text-lg",children:"Energy Limit"}),s.jsx("p",{className:"font-bold",children:e.levelEnergyFormatted})]})]}),e.canShareStory&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"",children:["Share in Your Story, Earn +",Sn(25e3)]}),s.jsx("button",{onClick:()=>{e.levelUpStoryShared?e.claimLevelUpStory():e.shareLevelUpStory()},className:"w-64 rounded-2xl bg-purple9 py-4 text-white",children:e.levelUpStoryShared?"Check":"Share"})]}),!e.canShareStory&&s.jsx(s.Fragment,{children:s.jsx("button",{onClick:e.hideLevelUp,className:"w-64 rounded-2xl bg-purple9 py-4 text-white",children:"Close"})})]})]})})),Ct="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2024.1.1,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20512%20512'%20style='enable-background:new%200%200%20512%20512;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23FFFFFF;}%20%3c/style%3e%3cg%3e%3cg%20id='close_1_'%3e%3cpath%20class='st0'%20d='M48.5,508.8c-12.6,0.7-24.9-3.4-34.4-11.6c-18.8-18.9-18.8-49.5,0-68.4L425.8,17%20c19.6-18.3,50.2-17.3,68.5,2.3c16.5,17.7,17.5,44.9,2.3,63.7L82.5,497.2C73.1,505.2,60.9,509.4,48.5,508.8L48.5,508.8z'/%3e%3cpath%20class='st0'%20d='M459.8,508.8c-12.7-0.1-24.9-5.1-33.9-14.1L14.1,83C-3.3,62.6-1,32,19.4,14.6c18.2-15.5,44.9-15.5,63.1,0%20l414.2,411.7c19.6,18.3,20.6,49,2.3,68.5c-0.7,0.8-1.5,1.5-2.3,2.3C486.5,506,473.2,510.2,459.8,508.8L459.8,508.8z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Zn=M(({model:e})=>{let t;return s.jsx(s.Fragment,{children:e.shownConnectedWallet&&s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 top-0 z-10",children:[s.jsx("div",{className:"absolute -z-10 h-screen w-screen bg-gradient-to-b from-black to-purple10 opacity-50",onClick:()=>{e.confirmDisconnect(!1),e.showConnectedWallet(!1)}}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 flex max-h-[90vh] flex-col items-center gap-4 overflow-y-scroll overscroll-contain rounded-t-4xl border-t-2 border-t-purple1 bg-black px-8 py-4",children:[s.jsx("img",{src:Lt,className:"h-16"}),!e.shownConfirmDisconnect&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-3xl font-bold",children:"Connected Wallet"}),s.jsxs("div",{className:"flex flex-row gap-2",children:[s.jsxs("button",{className:"font-mono group flex flex-row items-center gap-2 rounded-xl bg-green1 p-3",onClick:n=>{e.copyWalletAddress();const a=n.currentTarget;a.classList.add("copied"),clearTimeout(t),t=setTimeout(()=>{a.classList.remove("copied")},2e3)},children:[s.jsx("img",{src:Ut,className:"h-4 w-4"}),s.jsx("div",{children:e.truncatedWalletAddress}),s.jsx("img",{src:Ft,className:"-m-1 h-6 w-6 group-[.copied]:hidden"}),s.jsx("img",{src:tt,className:"hidden h-4 w-4 group-[.copied]:block"})]}),s.jsx("button",{onClick:()=>{e.confirmDisconnect(!0)},className:"rounded-xl bg-gray2 p-4",children:s.jsx("img",{src:Ct,className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex w-full flex-col gap-4 rounded-xl bg-gray3 p-4",children:[s.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-1",children:[s.jsx("div",{className:"flex-1",children:"hTON Balance:"}),s.jsx("div",{className:"",children:e.htonBalanceFormatted}),s.jsx("img",{src:Ot,className:"h-6 w-6 object-contain"})]}),s.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-1",children:[s.jsx("div",{className:"flex-1",children:"TON Balance:"}),s.jsx("div",{className:"",children:e.tonBalanceFormatted}),s.jsx("img",{src:nt,className:"h-6 w-6 object-contain"})]})]}),s.jsx("div",{className:"mb-40"}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 flex h-48 flex-col place-content-end bg-gradient-to-t from-black from-50% to-transparent p-8",children:s.jsx("button",{className:"h-16 w-full rounded-lg bg-purple9 text-xl font-bold",onClick:()=>{e.showConnectedWallet(!1)},children:"Back"})})]}),e.shownConfirmDisconnect&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-3xl font-bold",children:"Disconnect Wallet?"}),s.jsx("p",{children:"Only disconnect if you're connecting a new wallet, or you'll lose eligibility for the airdrop."}),e.currentWallet.connectedWalletsCount>=3&&s.jsxs("div",{className:"mt-4 text-yellow1",children:["You can connect up to 5 wallets. You’ve already connected"," ",e.currentWallet.connectedWalletsCount,"."]}),s.jsxs("button",{onClick:e.disconnectWallet,className:"flex flex-row items-center gap-2 rounded-xl bg-red-500 p-4",children:[s.jsx("img",{src:Ct,className:"h-4 w-4"}),"Disconnect"]}),s.jsx("div",{className:"mb-40"}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 flex h-48 flex-col place-content-end bg-gradient-to-t from-black from-50% to-transparent p-8",children:s.jsx("button",{className:"h-16 w-full rounded-lg bg-purple9 text-xl font-bold",onClick:()=>{e.confirmDisconnect(!1)},children:"Back"})})]})]})]})})}),Yn="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M2.71966%202.71968C3.01255%202.42678%203.48743%202.42677%203.78032%202.71966L8.00002%206.93925L12.2197%202.71967C12.5126%202.42677%2012.9874%202.42678%2013.2803%202.71967C13.5732%203.01257%2013.5732%203.48744%2013.2803%203.78033L9.06068%207.99991L13.2803%2012.2197C13.5732%2012.5126%2013.5732%2012.9874%2013.2803%2013.2803C12.9874%2013.5732%2012.5126%2013.5732%2012.2197%2013.2803L8.00002%209.06057L3.78033%2013.2803C3.48744%2013.5732%203.01257%2013.5732%202.71967%2013.2803C2.42678%2012.9874%202.42677%2012.5126%202.71967%2012.2197L6.93936%207.99991L2.71968%203.78034C2.42678%203.48745%202.42677%203.01257%202.71966%202.71968Z'%20fill='%23ffffff'%3e%3c/path%3e%3c/svg%3e",Xn="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='%23ffffff'%20version='1.1'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='800px'%20height='800px'%20viewBox='0%200%2045.311%2045.311'%20xml:space='preserve'%3e%3cg%3e%3cpath%20d='M22.675,0.02c-0.006,0-0.014,0.001-0.02,0.001c-0.007,0-0.013-0.001-0.02-0.001C10.135,0.02,0,10.154,0,22.656%20c0,12.5,10.135,22.635,22.635,22.635c0.007,0,0.013,0,0.02,0c0.006,0,0.014,0,0.02,0c12.5,0,22.635-10.135,22.635-22.635%20C45.311,10.154,35.176,0.02,22.675,0.02z%20M22.675,38.811c-0.006,0-0.014-0.001-0.02-0.001c-0.007,0-0.013,0.001-0.02,0.001%20c-2.046,0-3.705-1.658-3.705-3.705c0-2.045,1.659-3.703,3.705-3.703c0.007,0,0.013,0,0.02,0c0.006,0,0.014,0,0.02,0%20c2.045,0,3.706,1.658,3.706,3.703C26.381,37.152,24.723,38.811,22.675,38.811z%20M27.988,10.578%20c-0.242,3.697-1.932,14.692-1.932,14.692c0,1.854-1.519,3.356-3.373,3.356c-0.01,0-0.02,0-0.029,0c-0.009,0-0.02,0-0.029,0%20c-1.853,0-3.372-1.504-3.372-3.356c0,0-1.689-10.995-1.931-14.692C17.202,8.727,18.62,5.29,22.626,5.29%20c0.01,0,0.02,0.001,0.029,0.001c0.009,0,0.019-0.001,0.029-0.001C26.689,5.29,28.109,8.727,27.988,10.578z'/%3e%3c/g%3e%3c/svg%3e",$n=M(({model:e})=>s.jsx(s.Fragment,{children:e.transactionState!=="none"&&s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 top-0 z-10",children:[s.jsx("div",{className:"absolute -z-10 h-screen w-screen bg-gradient-to-b from-black to-purple10 opacity-50"}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 top-0 flex flex-col place-content-center overflow-y-scroll overscroll-contain",onClick:()=>{(e.transactionState==="timeout"||e.transactionState==="done")&&e.setTransactionState("none")},children:s.jsxs("div",{className:"mx-auto flex w-80 flex-col items-center rounded-4xl border-2 border-purple1 bg-gray3 p-4",children:[s.jsx("button",{className:"ml-auto rounded-full bg-purple9 p-2",onClick:()=>{e.setTransactionState("none")},children:s.jsx("img",{src:Yn,className:"h-4 w-4 object-contain"})}),e.transactionState!=="timeout"&&e.transactionState!=="done"&&s.jsx("img",{src:st,className:"h-20 animate-spin"}),e.transactionState==="timeout"&&s.jsx("img",{src:Xn,className:"h-20"}),e.transactionState==="done"&&s.jsx("img",{src:tt,className:"h-20"}),e.transactionState==="sign"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"m-4 text-center text-xl",children:["Confirm the transaction in ",e.walletApp]}),s.jsx("div",{className:"m-4 text-center",children:"It will only take a moment."})]}),e.transactionState==="wait"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mt-4 w-full rounded-full border border-gray2",children:s.jsx("div",{className:"h-1 w-1/4 bg-blue"})}),s.jsx("div",{className:"m-4 text-center text-xl",children:"Finalizing your transaction"}),s.jsx("div",{className:"m-4 text-center",children:"Awaiting the processing of your transaction in the next block."})]}),e.transactionState==="timeout"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"m-4 text-center text-xl",children:"Cannot find your transaction"}),s.jsx("div",{className:"m-4 text-center",children:"Despite multiple attempts, we could not locate it."})]}),e.transactionState==="done"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"m-4 text-center text-xl",children:"Successfully staked"}),s.jsxs("div",{className:"m-4 text-center",children:[s.jsxs("b",{className:"font-bold",children:[e.signedAmountFormatted," hTON"]})," sent to your wallet!"]}),s.jsx("button",{className:"my-4 h-16 w-60 rounded-lg bg-purple9 text-xl font-bold",onClick:()=>{e.setTransactionState("none")},children:"Done"})]})]})})]})})),er=M(({model:e})=>e.errorPage!=null?s.jsx(Hn,{model:e}):s.jsxs(s.Fragment,{children:[s.jsx(Ss,{model:e}),s.jsx(Mn,{model:e}),s.jsx(Vn,{model:e}),s.jsx(qn,{model:e}),s.jsx(zn,{model:e}),s.jsx(Gn,{model:e}),s.jsx(Jn,{model:e}),s.jsx(Qn,{model:e}),s.jsx(Zn,{model:e}),s.jsx($n,{model:e}),s.jsx(Rn,{model:e})]}));(function(){var e={},t="";try{t=location.hash.toString()}catch{}var n=S(t),a=J("initParams");if(a)for(var o in a)typeof n[o]>"u"&&(n[o]=a[o]);te("initParams",n);var d=!1,g;try{if(d=window.parent!=null&&window!=window.parent,d){window.addEventListener("message",function(m){if(m.source===window.parent){try{var y=JSON.parse(m.data)}catch{return}if(!(!y||!y.eventType))if(y.eventType=="set_custom_style")m.origin==="https://web.telegram.org"&&(g.innerHTML=y.eventData);else if(y.eventType=="reload_iframe"){try{window.parent.postMessage(JSON.stringify({eventType:"iframe_will_reload"}),"*")}catch{}location.reload()}else L(y.eventType,y.eventData)}}),g=document.createElement("style"),document.head.appendChild(g);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready",eventData:{reload_supported:!0}}),"*")}catch{}}}catch{}function x(m){try{return m=m.replace(/\+/g,"%20"),decodeURIComponent(m)}catch{return m}}function S(m){m=m.replace(/^#/,"");var y={};if(!m.length)return y;if(m.indexOf("=")<0&&m.indexOf("?")<0)return y._path=x(m),y;var A=m.indexOf("?");if(A>=0){var j=m.substr(0,A);y._path=x(j),m=m.substr(A+1)}var R=h(m);for(var Z in R)y[Z]=R[Z];return y}function h(m){var y={};if(!m.length)return y;var A=m.split("&"),j,R,Z,re;for(j=0;j<A.length;j++)R=A[j].split("="),Z=x(R[0]),re=R[1]==null?null:x(R[1]),y[Z]=re;return y}function w(m,y){var A=m.indexOf("#");if(A<0)return m+"#"+y;var j=m.substr(A+1);return j.indexOf("=")>=0||j.indexOf("?")>=0?m+"&"+y:j.length>0?m+"?"+y:m+y}function P(m,y,A){if(y||(y=function(){}),A===void 0&&(A=""),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(m,JSON.stringify(A)),y();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:m,eventData:A})),y();else if(d)try{var j="https://web.telegram.org";j="*",window.parent.postMessage(JSON.stringify({eventType:m,eventData:A}),j),y()}catch(R){y(R)}else y({notAvailable:!0})}function L(m,y){$(m,function(A){A(m,y)})}function $(m,y){var A=e[m];if(!(A===void 0||!A.length))for(var j=0;j<A.length;j++)try{y(A[j])}catch{}}function ee(m,y){e[m]===void 0&&(e[m]=[]);var A=e[m].indexOf(y);A===-1&&e[m].push(y)}function ne(m,y){if(e[m]!==void 0){var A=e[m].indexOf(y);A!==-1&&e[m].splice(A,1)}}function te(m,y){try{return window.sessionStorage.setItem("__telegram__"+m,JSON.stringify(y)),!0}catch{}return!1}function J(m){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+m))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:n,isIframe:d,onEvent:ee,offEvent:ne,postEvent:P,receiveEvent:L,callEventCallbacks:$},window.Telegram.Utils={urlSafeDecode:x,urlParseQueryString:h,urlParseHashParams:S,urlAppendHashParams:w,sessionStorageSet:te,sessionStorageGet:J},window.TelegramGameProxy_receiveEvent=L,window.TelegramGameProxy={receiveEvent:L}})();(function(){var e=window.Telegram.Utils,t=window.Telegram.WebView,n=t.initParams,a=t.isIframe,o={},d="",g={},x={},S="light",h="6.0",w="unknown";if(n.tgWebAppData&&n.tgWebAppData.length){d=n.tgWebAppData,g=e.urlParseQueryString(d);for(var P in g){var L=g[P];try{(L.substr(0,1)=="{"&&L.substr(-1)=="}"||L.substr(0,1)=="["&&L.substr(-1)=="]")&&(g[P]=JSON.parse(L))}catch{}}}if(n.tgWebAppThemeParams&&n.tgWebAppThemeParams.length){var $=n.tgWebAppThemeParams;try{var ee=JSON.parse($);ee&&Ue(ee)}catch{}}var ee=e.sessionStorageGet("themeParams");ee&&Ue(ee),n.tgWebAppVersion&&(h=n.tgWebAppVersion),n.tgWebAppPlatform&&(w=n.tgWebAppPlatform);function ne(r,i){i.theme_params&&(Ue(i.theme_params),window.Telegram.WebApp.MainButton.setParams({}),qe(),j("themeChanged"))}var te=window.innerHeight;function J(r,i){i.height&&(window.removeEventListener("resize",m),Me(i))}function m(r){te!=window.innerHeight&&(te=window.innerHeight,j("viewportChanged",{isStateStable:!0}))}function y(r){if(!(r.metaKey||r.ctrlKey)){for(var i=r.target;i.tagName!="A"&&i.parentNode;)i=i.parentNode;i.tagName=="A"&&i.target!="_blank"&&(i.protocol=="http:"||i.protocol=="https:")&&i.hostname=="t.me"&&(o.openTgLink(i.href),r.preventDefault())}}function A(r){return r.toString().replace(/^\s+|\s+$/g,"")}function j(r){var i=Array.prototype.slice.call(arguments);r=i.shift(),t.callEventCallbacks("webview:"+r,function(l){l.apply(o,i)})}function R(r,i){t.onEvent("webview:"+r,i)}function Z(r,i){t.offEvent("webview:"+r,i)}function re(r,i){var l=document.documentElement;l&&l.style&&l.style.setProperty&&l.style.setProperty("--tg-"+r,i)}function Ue(r){r.bg_color=="#1c1c1d"&&r.bg_color==r.secondary_bg_color&&(r.secondary_bg_color="#2c2c2e");var i;for(var l in r)(i=be(r[l]))&&(x[l]=i,l=="bg_color"&&(S=Gt(i)?"dark":"light",re("color-scheme",S)),l="theme-"+l.split("_").join("-"),re(l,i));e.sessionStorageSet("themeParams",x)}var Y={};function rt(r){for(var i=100;--i;){for(var l="",u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",p=u.length,T=0;T<r;T++)l+=u[Math.floor(Math.random()*p)];if(!Y[l])return Y[l]={},l}throw Error("WebAppCallbackIdGenerateFailed")}var ge=!1,ve=!1,it=!0;function Me(r){typeof r<"u"&&(it=!!r.is_expanded,ge=r.height,r.is_state_stable&&(ve=r.height),j("viewportChanged",{isStateStable:!!r.is_state_stable}));var i,l;ge!==!1?i=ge-K+"px":i=K?"calc(100vh - "+K+"px)":"100vh",ve!==!1?l=ve-K+"px":l=K?"calc(100vh - "+K+"px)":"100vh",re("viewport-height",i),re("viewport-stable-height",l)}var He=!1;function Ht(r){if(!D("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+h);return}He=!!r,t.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:He})}var Re=!0;function Rt(r){if(!D("7.7")){console.warn("[Telegram.WebApp] Changing swipes behavior is not supported in version "+h);return}Re=!!r,t.postEvent("web_app_setup_swipe_behavior",!1,{allow_vertical_swipe:Re})}var de="bg_color",xe=null;function Vt(){return de=="secondary_bg_color"?x.secondary_bg_color:de=="bg_color"?x.bg_color:xe}function qt(r){if(!D("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+h);return}D("6.9")||(x.bg_color&&x.bg_color==r?r="bg_color":x.secondary_bg_color&&x.secondary_bg_color==r&&(r="secondary_bg_color"));var i=null,l=null;if(r=="bg_color"||r=="secondary_bg_color")l=r;else if(D("6.9")&&(i=be(r),!i))throw console.error("[Telegram.WebApp] Header color format is invalid",r),Error("WebAppHeaderColorInvalid");if(!D("6.9")&&l!="bg_color"&&l!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",r),Error("WebAppHeaderColorKeyInvalid");de=l,xe=i,at()}var ot=null,Ve=null;function at(){(ot!=de||Ve!=xe)&&(ot=de,Ve=xe,Ve?t.postEvent("web_app_set_header_color",!1,{color:xe}):t.postEvent("web_app_set_header_color",!1,{color_key:de}))}var _e="bg_color";function lt(){return _e=="secondary_bg_color"?x.secondary_bg_color:_e=="bg_color"?x.bg_color:_e}function zt(r){if(!D("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+h);return}var i;if(r=="bg_color"||r=="secondary_bg_color")i=r;else if(i=be(r),!i)throw console.error("[Telegram.WebApp] Background color format is invalid",r),Error("WebAppBackgroundColorInvalid");_e=i,qe()}var ct=null;function qe(){var r=lt();ct!=r&&(ct=r,t.postEvent("web_app_set_background_color",!1,{color:r}))}function be(r){r+="";var i;if(i=/^\s*#([0-9a-f]{6})\s*$/i.exec(r))return"#"+i[1].toLowerCase();if(i=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(r))return("#"+i[1]+i[1]+i[2]+i[2]+i[3]+i[3]).toLowerCase();if(i=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(r)){var l=parseInt(i[1]),u=parseInt(i[2]),p=parseInt(i[3]);return l=(l<16?"0":"")+l.toString(16),u=(u<16?"0":"")+u.toString(16),p=(p<16?"0":"")+p.toString(16),"#"+l+u+p}return!1}function Gt(r){r=r.replace(/[\s#]/g,""),r.length==3&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);var i=parseInt(r.substr(0,2),16),l=parseInt(r.substr(2,2),16),u=parseInt(r.substr(4,2),16),p=Math.sqrt(.299*(i*i)+.587*(l*l)+.114*(u*u));return p<120}function Jt(r,i){typeof r!="string"&&(r=""),typeof i!="string"&&(i=""),r=r.replace(/^\s+|\s+$/g,"").split("."),i=i.replace(/^\s+|\s+$/g,"").split(".");var l=Math.max(r.length,i.length),u,p,T;for(u=0;u<l;u++)if(p=parseInt(r[u])||0,T=parseInt(i[u])||0,p!=T)return p>T?1:-1;return 0}function D(r){return Jt(h,r)>=0}function Kt(r){if(window.Blob)try{return new Blob([r]).size}catch{}for(var i=r.length,l=r.length-1;l>=0;l--){var u=r.charCodeAt(l);u>127&&u<=2047?i++:u>2047&&u<=65535&&(i+=2),u>=56320&&u<=57343&&l--}return i}var Qt=function(){var r=!1,i={};Object.defineProperty(i,"isVisible",{set:function(k){W({is_visible:k})},get:function(){return r},enumerable:!0});var l=null;t.onEvent("back_button_pressed",u);function u(){j("backButtonClicked")}function p(){return{is_visible:r}}function T(k){return typeof k>"u"&&(k=p()),JSON.stringify(k)}function v(){return D("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+h),!1)}function C(){var k=p(),F=T(k);l!==F&&(l=F,t.postEvent("web_app_setup_back_button",!1,k))}function W(k){return v()&&(typeof k.is_visible<"u"&&(r=!!k.is_visible),C()),i}return i.onClick=function(k){return v()&&R("backButtonClicked",k),i},i.offClick=function(k){return v()&&Z("backButtonClicked",k),i},i.show=function(){return W({is_visible:!0})},i.hide=function(){return W({is_visible:!1})},i}(),K=0,Zt=function(){var r=!1,i=!0,l=!1,u="CONTINUE",p=!1,T=!1,v={};Object.defineProperty(v,"text",{set:function(f){v.setParams({text:f})},get:function(){return u},enumerable:!0}),Object.defineProperty(v,"color",{set:function(f){v.setParams({color:f})},get:function(){return p||x.button_color||"#2481cc"},enumerable:!0}),Object.defineProperty(v,"textColor",{set:function(f){v.setParams({text_color:f})},get:function(){return T||x.button_text_color||"#ffffff"},enumerable:!0}),Object.defineProperty(v,"isVisible",{set:function(f){v.setParams({is_visible:f})},get:function(){return r},enumerable:!0}),Object.defineProperty(v,"isProgressVisible",{get:function(){return l},enumerable:!0}),Object.defineProperty(v,"isActive",{set:function(f){v.setParams({is_active:f})},get:function(){return i},enumerable:!0});var C=null;t.onEvent("main_button_pressed",G);var W=null,k={};if(n.tgWebAppDebug){W=document.createElement("tg-main-button"),k={font:"600 14px/18px sans-serif",display:"none",width:"100%",height:"48px",borderRadius:"0",background:"no-repeat right center",position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"15px 20px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var F in k)W.style[F]=k[F];document.addEventListener("DOMContentLoaded",function f(B){document.removeEventListener("DOMContentLoaded",f),document.body.appendChild(W),W.addEventListener("click",G,!1)})}function G(){i&&j("mainButtonClicked")}function Pe(){var f=v.color,B=v.textColor;return r?{is_visible:!0,is_active:i,is_progress_visible:l,text:u,color:f,text_color:B}:{is_visible:!1}}function Ge(f){return typeof f>"u"&&(f=Pe()),JSON.stringify(f)}function ke(){var f=Pe(),B=Ge(f);C!==B&&(C=B,t.postEvent("web_app_setup_main_button",!1,f),n.tgWebAppDebug&&oe(f))}function oe(f){f.is_visible?(W.style.display="block",K=48,W.style.opacity=f.is_active?"1":"0.8",W.style.cursor=f.is_active?"pointer":"auto",W.disabled=!f.is_active,W.innerText=f.text,W.style.backgroundImage=f.is_progress_visible?"url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewport%3D%220%200%2048%2048%22%20width%3D%2248px%22%20height%3D%2248px%22%3E%3Ccircle%20cx%3D%2250%25%22%20cy%3D%2250%25%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222.25%22%20stroke-linecap%3D%22round%22%20fill%3D%22none%22%20stroke-dashoffset%3D%22106%22%20r%3D%229%22%20stroke-dasharray%3D%2256.52%22%20rotate%3D%22-90%22%3E%3Canimate%20attributeName%3D%22stroke-dashoffset%22%20attributeType%3D%22XML%22%20dur%3D%22360s%22%20from%3D%220%22%20to%3D%2212500%22%20repeatCount%3D%22indefinite%22%3E%3C%2Fanimate%3E%3CanimateTransform%20attributeName%3D%22transform%22%20attributeType%3D%22XML%22%20type%3D%22rotate%22%20dur%3D%221s%22%20from%3D%22-90%2024%2024%22%20to%3D%22630%2024%2024%22%20repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fcircle%3E%3C%2Fsvg%3E')":"none",W.style.backgroundColor=f.color,W.style.color=f.text_color):(W.style.display="none",K=0),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=K+"px"),Me()}function ue(f){if(typeof f.text<"u"){var B=A(f.text);if(!B.length)throw console.error("[Telegram.WebApp] Main button text is required",f.text),Error("WebAppMainButtonParamInvalid");if(B.length>64)throw console.error("[Telegram.WebApp] Main button text is too long",B),Error("WebAppMainButtonParamInvalid");u=B}if(typeof f.color<"u")if(f.color===!1||f.color===null)p=!1;else{var I=be(f.color);if(!I)throw console.error("[Telegram.WebApp] Main button color format is invalid",f.color),Error("WebAppMainButtonParamInvalid");p=I}if(typeof f.text_color<"u")if(f.text_color===!1||f.text_color===null)T=!1;else{var O=be(f.text_color);if(!O)throw console.error("[Telegram.WebApp] Main button text color format is invalid",f.text_color),Error("WebAppMainButtonParamInvalid");T=O}if(typeof f.is_visible<"u"){if(f.is_visible&&!v.text.length)throw console.error("[Telegram.WebApp] Main button text is required"),Error("WebAppMainButtonParamInvalid");r=!!f.is_visible}return typeof f.is_active<"u"&&(i=!!f.is_active),ke(),v}return v.setText=function(f){return v.setParams({text:f})},v.onClick=function(f){return R("mainButtonClicked",f),v},v.offClick=function(f){return Z("mainButtonClicked",f),v},v.show=function(){return v.setParams({is_visible:!0})},v.hide=function(){return v.setParams({is_visible:!1})},v.enable=function(){return v.setParams({is_active:!0})},v.disable=function(){return v.setParams({is_active:!1})},v.showProgress=function(f){return i=!!f,l=!0,ke(),v},v.hideProgress=function(){return v.isActive||(i=!0),l=!1,ke(),v},v.setParams=ue,v}(),dt=function(){var r=!1,i={};Object.defineProperty(i,"isVisible",{set:function(k){W({is_visible:k})},get:function(){return r},enumerable:!0});var l=null;t.onEvent("settings_button_pressed",u);function u(){j("settingsButtonClicked")}function p(){return{is_visible:r}}function T(k){return typeof k>"u"&&(k=p()),JSON.stringify(k)}function v(){return D("6.10")?!0:(console.warn("[Telegram.WebApp] SettingsButton is not supported in version "+h),!1)}function C(){var k=p(),F=T(k);l!==F&&(l=F,t.postEvent("web_app_setup_settings_button",!1,k))}function W(k){return v()&&(typeof k.is_visible<"u"&&(r=!!k.is_visible),C()),i}return i.onClick=function(k){return v()&&R("settingsButtonClicked",k),i},i.offClick=function(k){return v()&&Z("settingsButtonClicked",k),i},i.show=function(){return W({is_visible:!0})},i.hide=function(){return W({is_visible:!1})},i}(),Yt=function(){var r={};function i(l){if(!D("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+h),r;if(l.type=="impact"){if(l.impact_style!="light"&&l.impact_style!="medium"&&l.impact_style!="heavy"&&l.impact_style!="rigid"&&l.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",l.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(l.type=="notification"){if(l.notification_type!="error"&&l.notification_type!="success"&&l.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",l.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(l.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",l.type),Error("WebAppHapticFeedbackTypeInvalid");return t.postEvent("web_app_trigger_haptic_feedback",!1,l),r}return r.impactOccurred=function(l){return i({type:"impact",impact_style:l})},r.notificationOccurred=function(l){return i({type:"notification",notification_type:l})},r.selectionChanged=function(){return i({type:"selection_change"})},r}(),Xt=function(){var r={};function i(l,u,p){if(!D("6.9"))throw console.error("[Telegram.WebApp] CloudStorage is not supported in version "+h),Error("WebAppMethodUnsupported");return ze(l,u,p),r}return r.setItem=function(l,u,p){return i("saveStorageValue",{key:l,value:u},p)},r.getItem=function(l,u){return r.getItems([l],u?function(p,T){p?u(p):u(null,T[l])}:null)},r.getItems=function(l,u){return i("getStorageValues",{keys:l},u)},r.removeItem=function(l,u){return r.removeItems([l],u)},r.removeItems=function(l,u){return i("deleteStorageValues",{keys:l},u)},r.getKeys=function(l){return i("getStorageKeys",{},l)},r}(),$t=function(){var r=!1,i=!1,l="unknown",u=!1,p=!1,T=!1,v="",C={};Object.defineProperty(C,"isInited",{get:function(){return r},enumerable:!0}),Object.defineProperty(C,"isBiometricAvailable",{get:function(){return r&&i},enumerable:!0}),Object.defineProperty(C,"biometricType",{get:function(){return l||"unknown"},enumerable:!0}),Object.defineProperty(C,"isAccessRequested",{get:function(){return u},enumerable:!0}),Object.defineProperty(C,"isAccessGranted",{get:function(){return u&&p},enumerable:!0}),Object.defineProperty(C,"isBiometricTokenSaved",{get:function(){return T},enumerable:!0}),Object.defineProperty(C,"deviceId",{get:function(){return v||""},enumerable:!0});var W={callbacks:[]},k=!1,F=!1,G=!1;t.onEvent("biometry_info_received",Pe),t.onEvent("biometry_auth_requested",Ge),t.onEvent("biometry_token_updated",ke);function Pe(f,B){if(r=!0,B.available?(i=!0,l=B.type||"unknown",B.access_requested?(u=!0,p=!!B.access_granted,T=!!B.token_saved):(u=!1,p=!1,T=!1)):(i=!1,l="unknown",u=!1,p=!1,T=!1),v=B.device_id||"",W.callbacks.length>0)for(var I=0;I<W.callbacks.length;I++){var O=W.callbacks[I];O()}if(k){var Te=k;k=!1,Te.callback&&Te.callback(p)}j("biometricManagerUpdated")}function Ge(f,B){var I=B.status=="authorized",O=B.token||"";if(F){var Te=F;F=!1,Te.callback&&Te.callback(I,I?O:null)}j("biometricAuthRequested",I?{isAuthenticated:!0,biometricToken:O}:{isAuthenticated:!1})}function ke(f,B){var I=!1;if(i&&u&&(B.status=="updated"?(T=!0,I=!0):B.status=="removed"&&(T=!1,I=!0)),G){var O=G;G=!1,O.callback&&O.callback(I)}j("biometricTokenUpdated",{isUpdated:I})}function oe(){return D("7.2")?!0:(console.warn("[Telegram.WebApp] BiometricManager is not supported in version "+h),!1)}function ue(){if(!r)throw console.error("[Telegram.WebApp] BiometricManager should be inited before using."),Error("WebAppBiometricManagerNotInited");return!0}return C.init=function(f){return!oe()||r||(f&&W.callbacks.push(f),t.postEvent("web_app_biometry_get_info",!1)),C},C.requestAccess=function(f,B){if(!oe())return C;if(ue(),!i)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(k)throw console.error("[Telegram.WebApp] Access is already requested"),Error("WebAppBiometricManagerAccessRequested");var I={};if(typeof f.reason<"u"){var O=A(f.reason);if(O.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",O),Error("WebAppBiometricRequestAccessParamInvalid");O.length>0&&(I.reason=O)}return k={callback:B},t.postEvent("web_app_biometry_request_access",!1,I),C},C.authenticate=function(f,B){if(!oe())return C;if(ue(),!i)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!p)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(F)throw console.error("[Telegram.WebApp] Authentication request is already in progress."),Error("WebAppBiometricManagerAuthenticationRequested");var I={};if(typeof f.reason<"u"){var O=A(f.reason);if(O.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",O),Error("WebAppBiometricRequestAccessParamInvalid");O.length>0&&(I.reason=O)}return F={callback:B},t.postEvent("web_app_biometry_request_auth",!1,I),C},C.updateBiometricToken=function(f,B){if(!oe())return C;if(f=f||"",f.length>1024)throw console.error("[Telegram.WebApp] Token is too long",f),Error("WebAppBiometricManagerTokenInvalid");if(ue(),!i)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!p)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(G)throw console.error("[Telegram.WebApp] Token request is already in progress."),Error("WebAppBiometricManagerTokenUpdateRequested");return G={callback:B},t.postEvent("web_app_biometry_update_token",!1,{token:f}),C},C.openSettings=function(){if(!oe())return C;if(ue(),!i)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!u)throw console.error("[Telegram.WebApp] Biometric access was not requested yet."),Error("WebAppBiometricManagerBiometricsAccessNotRequested");return p?(console.warn("[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings."),C):(t.postEvent("web_app_biometry_open_settings",!1),C)},C}(),we={};function es(r,i){if(i.slug&&we[i.slug]){var l=we[i.slug];delete we[i.slug],l.callback&&l.callback(i.status),j("invoiceClosed",{url:l.url,status:i.status})}}var ye=!1;function ts(r,i){if(ye){var l=ye;ye=!1;var u=null;typeof i.button_id<"u"&&(u=i.button_id),l.callback&&l.callback(u),j("popupClosed",{button_id:u})}}var ie=!1;function ss(r,i){if(ie){var l=ie,u=null;typeof i.data<"u"&&(u=i.data),l.callback&&l.callback(u)&&(ie=!1,t.postEvent("web_app_close_scan_qr_popup",!1)),j("qrTextReceived",{data:u})}}function ns(r,i){ie=!1,j("scanQrPopupClosed")}function rs(r,i){if(i.req_id&&Y[i.req_id]){var l=Y[i.req_id];delete Y[i.req_id];var u=null;typeof i.data<"u"&&(u=i.data),l.callback&&l.callback(u),j("clipboardTextReceived",{data:u})}}var Ae=!1;function is(r,i){if(Ae){var l=Ae;Ae=!1,l.callback&&l.callback(i.status=="allowed"),j("writeAccessRequested",{status:i.status})}}function os(r,i){var l,u,p=0,T=function(){ze("getRequestedContact",{},function(C,W){W&&W.length?(clearTimeout(u),r(W)):(p+=50,l=setTimeout(T,p))})},v=function(){clearTimeout(l),r("")};u=setTimeout(v,i),T()}var Ce=!1;function as(r,i){if(Ce){var l=Ce;Ce=!1;var u=i.status=="sent",p={status:i.status};u?os(function(T){if(T&&T.length){p.response=T,p.responseUnsafe=e.urlParseQueryString(T);for(var v in p.responseUnsafe){var C=p.responseUnsafe[v];try{(C.substr(0,1)=="{"&&C.substr(-1)=="}"||C.substr(0,1)=="["&&C.substr(-1)=="]")&&(p.responseUnsafe[v]=JSON.parse(C))}catch{}}}l.callback&&l.callback(u,p),j("contactRequested",p)},3e3):(l.callback&&l.callback(u,p),j("contactRequested",p))}}function ls(r,i){if(i.req_id&&Y[i.req_id]){var l=Y[i.req_id];delete Y[i.req_id];var u=null,p=null;typeof i.result<"u"&&(u=i.result),typeof i.error<"u"&&(p=i.error),l.callback&&l.callback(p,u)}}function ze(r,i,l){if(!D("6.9"))throw console.error("[Telegram.WebApp] Method invokeCustomMethod is not supported in version "+h),Error("WebAppMethodUnsupported");var u=rt(16),p={req_id:u,method:r,params:i||{}};Y[u]={callback:l},t.postEvent("web_app_invoke_custom_method",!1,p)}window.Telegram||(window.Telegram={}),Object.defineProperty(o,"initData",{get:function(){return d},enumerable:!0}),Object.defineProperty(o,"initDataUnsafe",{get:function(){return g},enumerable:!0}),Object.defineProperty(o,"version",{get:function(){return h},enumerable:!0}),Object.defineProperty(o,"platform",{get:function(){return w},enumerable:!0}),Object.defineProperty(o,"colorScheme",{get:function(){return S},enumerable:!0}),Object.defineProperty(o,"themeParams",{get:function(){return x},enumerable:!0}),Object.defineProperty(o,"isExpanded",{get:function(){return it},enumerable:!0}),Object.defineProperty(o,"viewportHeight",{get:function(){return(ge===!1?window.innerHeight:ge)-K},enumerable:!0}),Object.defineProperty(o,"viewportStableHeight",{get:function(){return(ve===!1?window.innerHeight:ve)-K},enumerable:!0}),Object.defineProperty(o,"isClosingConfirmationEnabled",{set:function(r){Ht(r)},get:function(){return He},enumerable:!0}),Object.defineProperty(o,"isVerticalSwipesEnabled",{set:function(r){Rt(r)},get:function(){return Re},enumerable:!0}),Object.defineProperty(o,"headerColor",{set:function(r){qt(r)},get:function(){return Vt()},enumerable:!0}),Object.defineProperty(o,"backgroundColor",{set:function(r){zt(r)},get:function(){return lt()},enumerable:!0}),Object.defineProperty(o,"BackButton",{value:Qt,enumerable:!0}),Object.defineProperty(o,"MainButton",{value:Zt,enumerable:!0}),Object.defineProperty(o,"SettingsButton",{value:dt,enumerable:!0}),Object.defineProperty(o,"HapticFeedback",{value:Yt,enumerable:!0}),Object.defineProperty(o,"CloudStorage",{value:Xt,enumerable:!0}),Object.defineProperty(o,"BiometricManager",{value:$t,enumerable:!0}),o.setHeaderColor=function(r){o.headerColor=r},o.setBackgroundColor=function(r){o.backgroundColor=r},o.enableClosingConfirmation=function(){o.isClosingConfirmationEnabled=!0},o.disableClosingConfirmation=function(){o.isClosingConfirmationEnabled=!1},o.enableVerticalSwipes=function(){o.isVerticalSwipesEnabled=!0},o.disableVerticalSwipes=function(){o.isVerticalSwipesEnabled=!1},o.isVersionAtLeast=function(r){return D(r)},o.onEvent=function(r,i){R(r,i)},o.offEvent=function(r,i){Z(r,i)},o.sendData=function(r){if(!r||!r.length)throw console.error("[Telegram.WebApp] Data is required",r),Error("WebAppDataInvalid");if(Kt(r)>4096)throw console.error("[Telegram.WebApp] Data is too long",r),Error("WebAppDataInvalid");t.postEvent("web_app_data_send",!1,{data:r})},o.switchInlineQuery=function(r,i){if(!D("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+h),Error("WebAppMethodUnsupported");if(!n.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if(r=r||"",r.length>256)throw console.error("[Telegram.WebApp] Inline query is too long",r),Error("WebAppInlineQueryInvalid");var l=[];if(i){if(!Array.isArray(i))throw console.error("[Telegram.WebApp] Choose chat types should be an array",i),Error("WebAppInlineChooseChatTypesInvalid");for(var u={users:1,bots:1,groups:1,channels:1},p=0;p<i.length;p++){var T=i[p];if(!u[T])throw console.error("[Telegram.WebApp] Choose chat type is invalid",T),Error("WebAppInlineChooseChatTypeInvalid");u[T]!=2&&(u[T]=2,l.push(T))}}t.postEvent("web_app_switch_inline_query",!1,{query:r,chat_types:l})},o.openLink=function(u,i){var l=document.createElement("A");if(l.href=u,l.protocol!="http:"&&l.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",u),Error("WebAppTgUrlInvalid");var u=l.href;if(i=i||{},D("6.1")){var p={url:u};D("6.4")&&i.try_instant_view&&(p.try_instant_view=!0),D("7.6")&&i.try_browser&&(p.try_browser=i.try_browser),t.postEvent("web_app_open_link",!1,p)}else window.open(u,"_blank")},o.openTelegramLink=function(r){var i=document.createElement("A");if(i.href=r,i.protocol!="http:"&&i.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",r),Error("WebAppTgUrlInvalid");if(i.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",r),Error("WebAppTgUrlInvalid");var l=i.pathname+i.search;a||D("6.1")?t.postEvent("web_app_open_tg_link",!1,{path_full:l}):location.href="https://t.me"+l},o.openInvoice=function(r,i){var l=document.createElement("A"),u,p;if(l.href=r,l.protocol!="http:"&&l.protocol!="https:"||l.hostname!="t.me"||!(u=l.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(p=u[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",r),Error("WebAppInvoiceUrlInvalid");if(!D("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+h),Error("WebAppMethodUnsupported");if(we[p])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");we[p]={url:r,callback:i},t.postEvent("web_app_open_invoice",!1,{slug:p})},o.showPopup=function(r,i){if(!D("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+h),Error("WebAppMethodUnsupported");if(ye)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var l="",u="",p=[],T={};if(typeof r.title<"u"){if(l=A(r.title),l.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",l),Error("WebAppPopupParamInvalid");l.length>0&&(T.title=l)}if(typeof r.message<"u"&&(u=A(r.message)),!u.length)throw console.error("[Telegram.WebApp] Popup message is required",r.message),Error("WebAppPopupParamInvalid");if(u.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",u),Error("WebAppPopupParamInvalid");if(T.message=u,typeof r.buttons<"u"){if(!Array.isArray(r.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",r.buttons),Error("WebAppPopupParamInvalid");for(var v=0;v<r.buttons.length;v++){var C=r.buttons[v],W={},k="";if(typeof C.id<"u"&&(k=C.id.toString(),k.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",k),Error("WebAppPopupParamInvalid");W.id=k;var F=C.type;if(typeof F>"u"&&(F="default"),W.type=F,!(F=="ok"||F=="close"||F=="cancel"))if(F=="default"||F=="destructive"){var G="";if(typeof C.text<"u"&&(G=A(C.text)),!G.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+F,C.text),Error("WebAppPopupParamInvalid");if(G.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",G),Error("WebAppPopupParamInvalid");W.text=G}else throw console.error("[Telegram.WebApp] Popup button type is invalid",F),Error("WebAppPopupParamInvalid");p.push(W)}}else p.push({id:"",type:"close"});if(p.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(p.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");T.buttons=p,ye={callback:i},t.postEvent("web_app_open_popup",!1,T)},o.showAlert=function(r,i){o.showPopup({message:r},i?function(){i()}:null)},o.showConfirm=function(r,i){o.showPopup({message:r,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},i?function(l){i(l=="ok")}:null)},o.showScanQrPopup=function(r,i){if(!D("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+h),Error("WebAppMethodUnsupported");if(ie)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var l="",u={};if(typeof r.text<"u"){if(l=A(r.text),l.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",l),Error("WebAppScanQrPopupParamInvalid");l.length>0&&(u.text=l)}ie={callback:i},t.postEvent("web_app_open_scan_qr_popup",!1,u)},o.closeScanQrPopup=function(){if(!D("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+h),Error("WebAppMethodUnsupported");ie=!1,t.postEvent("web_app_close_scan_qr_popup",!1)},o.readTextFromClipboard=function(r){if(!D("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+h),Error("WebAppMethodUnsupported");var i=rt(16),l={req_id:i};Y[i]={callback:r},t.postEvent("web_app_read_text_from_clipboard",!1,l)},o.requestWriteAccess=function(r){if(!D("6.9"))throw console.error("[Telegram.WebApp] Method requestWriteAccess is not supported in version "+h),Error("WebAppMethodUnsupported");if(Ae)throw console.error("[Telegram.WebApp] Write access is already requested"),Error("WebAppWriteAccessRequested");Ae={callback:r},t.postEvent("web_app_request_write_access")},o.requestContact=function(r){if(!D("6.9"))throw console.error("[Telegram.WebApp] Method requestContact is not supported in version "+h),Error("WebAppMethodUnsupported");if(Ce)throw console.error("[Telegram.WebApp] Contact is already requested"),Error("WebAppContactRequested");Ce={callback:r},t.postEvent("web_app_request_phone")},o.shareToStory=function(r,i){if(i=i||{},!D("7.8"))throw console.error("[Telegram.WebApp] Method shareToStory is not supported in version "+h),Error("WebAppMethodUnsupported");var l=document.createElement("A");if(l.href=r,l.protocol!="http:"&&l.protocol!="https:")throw console.error("[Telegram.WebApp] Media url protocol is not supported",url),Error("WebAppMediaUrlInvalid");var u={};if(u.media_url=l.href,typeof i.text<"u"){var p=A(i.text);if(p.length>2048)throw console.error("[Telegram.WebApp] Text is too long",p),Error("WebAppShareToStoryParamInvalid");p.length>0&&(u.text=p)}if(typeof i.widget_link<"u"){if(i.widget_link=i.widget_link||{},l.href=i.widget_link.url,l.protocol!="http:"&&l.protocol!="https:")throw console.error("[Telegram.WebApp] Link protocol is not supported",url),Error("WebAppShareToStoryParamInvalid");var T={url:l.href};if(typeof i.widget_link.name<"u"){var v=A(i.widget_link.name);if(v.length>48)throw console.error("[Telegram.WebApp] Link name is too long",v),Error("WebAppShareToStoryParamInvalid");v.length>0&&(T.name=v)}u.widget_link=T}t.postEvent("web_app_share_to_story",!1,u)},o.invokeCustomMethod=function(r,i,l){ze(r,i,l)},o.ready=function(){t.postEvent("web_app_ready")},o.expand=function(){t.postEvent("web_app_expand")},o.close=function(r){r=r||{};var i={};D("7.6")&&r.return_back&&(i.return_back=!0),t.postEvent("web_app_close",!1,i)},window.Telegram.WebApp=o,at(),qe(),Me(),n.tgWebAppShowSettings&&dt.show(),window.addEventListener("resize",m),a&&document.addEventListener("click",y),t.onEvent("theme_changed",ne),t.onEvent("viewport_changed",J),t.onEvent("invoice_closed",es),t.onEvent("popup_closed",ts),t.onEvent("qr_text_received",ss),t.onEvent("scan_qr_popup_closed",ns),t.onEvent("clipboard_text_received",rs),t.onEvent("write_access_requested",is),t.onEvent("phone_requested",as),t.onEvent("custom_method_invoked",ls),t.postEvent("web_app_request_theme"),t.postEvent("web_app_request_viewport")})();const Mt=new Nn;Mt.activateSplash();fs.createRoot(document.querySelector("#root")??document.body).render(s.jsx(ms.StrictMode,{children:s.jsx(er,{model:Mt})}));
